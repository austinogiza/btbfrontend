/*
 * Opentag, a tag deployment platform
 * Copyright 2011-2016, Qubit Group
 * http://opentag.qubitproducts.com
 */
(function(){var L=function(){return this}();L.qubit=L.qubit||{};L.qubit.SYSTEM_DEFAULTS={pingServerUrl:"opentag-stats.qubit.com/ping",tellLoadTimesProbability:1}})();(function(){var L={"id":"86699"};try{var F=function(){return this}();if(!F.qubit)F.qubit={};var K=F.qubit;if(!K.cs)K.cs={};K.CLIENT_CONFIG=L;var M=L.id||"efault";M="d"+M;if(!K.cs[M])K.cs[M]={};K.cs[M].ClientConfig=L;if(K.SYSTEM_DEFAULTS)K.cs[M].SystemDefaults=K.SYSTEM_DEFAULTS}catch(Z){}})();
(function(){(function(){function L(){return ia.uv}function F(){var h=L();if(!h||!h.emit)return false;if(!fa){fa=true;for(var a=0;a<aa.length;a++){var w=aa[a];if(w.on)h.on.apply(h,w.on);else if(w.emit)h.emit.apply(h,w.emit)}h.on(/.*/,function(p){var x=p.meta.type;var e=ba[x];if(!e)ba[x]={current:p,history:[p]};else{e.current=p;e.history.push(p)}}).replay();ca=true}return true}(function(){if(!Function.prototype.bind)Function.prototype.bind=function(h){if(typeof this!=="function")throw new TypeError("Function.prototype.bind - what is trying "+
"to be bound is not callable");var a=Array.prototype.slice.call(arguments,1);var w=this;var p=function(){};var x=function(){return w.apply(this instanceof p?this:h,a.concat(Array.prototype.slice.call(arguments)))};p.prototype=this.prototype;x.prototype=new p;return x}})();var K={__anonymous__:true};var M=null;try{M=(false||eval)("this")}catch(h){}if(!M)try{var Z=function(){return this};M=Z()}catch(h){}K=M;var B=K.qubit||{};if(!K.qubit)K.qubit=B;var W="3.3.2";if(B.VERSION&&B.VERSION!==W)try{console.warn("There is already 'qubit.VERSION' set to: "+
B.VERSION)}catch(h){}B.VERSION=W;try{if(typeof module==="object")module.exports=K}catch(h){}var N=function(){};var X;(function(){function h(){}function a(x,e,m,c,r){var t=x.split(".");var u=h.NAMESPACE_BASE||K;var z=null;var f=null;var v;if(r)u=M;var A=u;u=m||u;for(v=0;v<t.length-1;v+=1){z=u;f=t[v];u[f]=u[f]||{};u=u[f]}z=u;f=t[t.length-1];if(M.TAGSDK_NS_OVERRIDE)c=false;if(M.TAGSDK_NS_FORCED_OVERRIDE_OPTION!==undefined)c=!M.TAGSDK_NS_FORCED_OVERRIDE_OPTION;if(e!==undefined){if(z[f]===undefined||!c)z[f]=
e}else z[f]=z[f]||{};if(e){e.CLASSPATH=t.join(".");t.splice(t.length-1,1);e.PACKAGE_NAME=t.join(".")}return{root:A,object:z,instance:z[f]}}h.global=function(){return M};h.STANDARD_CS_NS="qubit.cs";h.clientSpaceClasspath=function(){if(window.qubit.CLIENT_CONFIG)return"qubit.cs.d"+window.qubit.CLIENT_CONFIG.id;return h.STANDARD_CS_NS};h.globalNamespace=function(x,e,m,c){return a(x,e,m,c,true)};h.namespace=function(x,e,m,c){return a(x,e,m,c,false)};h.clientNamespace=function(x,e,m,c){return h.namespace(h.clientSpaceClasspath()+
"."+x,e,m,c)};h.clazz=function(x,e,m,c,r){h.namespace(x,e,c,true);if(typeof m==="function"){e.SUPER=m;e.superclass=m;e.prototype=new m(r);e.prototype.SUPER=m;e.prototype.CLASS=e}var t=x.split(".");if(e.prototype){e.prototype.CLASSPATH=t.join(".");e.prototype.CLASS_NAME=t[t.length-1];t.splice(t.length-1,1);e.prototype.PACKAGE_NAME=t.join(".")}else{e.CLASSPATH=t.join(".");e.STATIC_NAME=t[t.length-1];t.splice(t.length-1,1);e.PACKAGE_NAME=t.join(".")}return e};h.clazz("qubit.Define",h);h.clientClazz=
function(x,e,m,c,r){return h.clazz(h.clientSpaceClasspath()+"."+x,e,m,c,r)};h.STANDARD_VS_NS="qubit.vs";h.vendorsSpaceClasspath=function(x){var e=B.VENDOR_SPACE_CP;var m=e===undefined||e===null?h.STANDARD_VS_NS:e;if(x)if(m)return m+"."+x;else return x;return m};var w=h.vendorsSpaceClasspath();var p;if(w)p=h.namespace(w,{},null,true).instance;else p=h.global();h.getVendorSpace=function(){return p};h.vendorNamespace=function(x,e,m,c){x=h.vendorsSpaceClasspath(x);return h.namespace(x,e,m,c)};h.vendorClazz=
function(x,e,m,c,r){x=h.vendorsSpaceClasspath(x);return h.clazz(x,e,m,c,r)}})();(function(){function h(m){}var a="abcdefghijklmnopqrstuvwxyz"+"0123456789"+"ABCDEFGHIJKLMNOPQRSTUVWXYZ"+"*!-#$\x26+()@"+"'%./:\x3c\x3e?["+'"]^_`{|}~'+"\\"+";\x3d";var w={};for(var p=0;p<a.length;p++)w[a.charAt(p)]=p;B.Define.clazz("qubit.Cookie",h);h.cookieAlphabet=a;h.cookieAlphabetMap=w;h.decode=function(m){return unescape(m)};h.encode=function(m){return escape(m)};h.set=function(m,c,r,t,u){var z;if(r){var f=new Date;
f.setTime(f.getTime()+r*24*60*60*1E3);z="; expires\x3d"+f.toGMTString()}else z="";if(!u){m=h.encode(m);c=h.encode(c)}var v=m+"\x3d"+c+z+"; path\x3d/;";if(t)v+=" domain\x3d"+t;document.cookie=v};var x;var e={};h.resetCache=function(){x=null;e={}};h.getCached=function(m,c){var r=m+"\x3d"+!!c;if(e[r]!==undefined)return e[r];var t=m+"\x3d";if(!x)x=document.cookie.split(";");for(var u=0;u<x.length;u++){for(var z=x[u];z.charAt(0)===" ";)z=z.substring(1,z.length);if(z.indexOf(t)===0){var f=z.substring(t.length,
z.length);if(!c)f=h.decode(f);e[r]=f;return f}}e[r]=null;return null};h.get=function(m,c){var r=m+"\x3d";var t=document.cookie.split(";");for(var u=0;u<t.length;u++){for(var z=t[u];z.charAt(0)===" ";)z=z.substring(1,z.length);if(z.indexOf(r)===0){var f=z.substring(r.length,z.length);if(!c)f=h.decode(f);return f}}return null};h.getAllForName=function(m,c){if(!m)return[];var r=m+"\x3d";var t=document.cookie.split(";");var u=[];for(var z=0;z<t.length;z++){for(var f=t[z];f.charAt(0)===" ";)f=f.substring(1,
f.length);if(f.indexOf(r)===0){var v=f.substring(r.length,f.length);if(c)v=h.decode(v);u.push(v)}}return u};h.getAll=function(m){var c=document.cookie.split(";");var r=[];for(var t=0;t<c.length;t++){for(var u=c[t];u.charAt(0)===" ";)u=u.substring(1,u.length);var z=u.substring(0,u.indexOf("\x3d"));var f=u.substring(z.length+1,u.length);if(m)f=h.decode(f);r.push([z,f])}return r};h.rm=function(m,c){h.set(m,"",-1,c)}})();(function(){function h(f,v,A){this.collectLogs=!!h.isCollecting();this.collectLocally=
A;this.collection=[];this.getPrefix=function(){var C="";if(v){if(typeof v==="function")C=v(this.ref);else if(v.CLASS_NAME)C=v.CLASS_NAME;else if(v.constructor&&v.constructor.name)C=v.constructor.name;if(C)C+=" -\x3e "}return(f||"")+C}}function a(f,v,A,C,k,l,q,d){var b;var g=x>=d;if(h.getCollectLevel()>=0||g){if(k)b=[C,q,A];else b=[v+f.getPrefix()+C,l,A];b[3]=d;f.collect(b,d);if(g)f.printMessage.apply(f,b)}}var w=B.Define;var p=null;w.clazz("qubit.opentag.Log",h);h.LEVEL_FINEST=4;h.LEVEL_FINE=3;h.LEVEL_INFO=
2;h.LEVEL_WARN=1;h.LEVEL_ERROR=0;h.LEVEL_NONE=-1;h.MAX_LOG_LEN=1E4;h.prototype.MAX_LOG_LEN=-1;var x=h.LEVEL_NONE;var e=h.LEVEL_NONE;var m=true;h.setLevelFromCookie=function(){var f=B.Cookie.get("qubit.opentag.Log.LEVEL");if(f){f=+f;if(!isNaN(f))if(f>0){var v=h.LEVEL_FINE;h.setCollectLevel(f>v?f:v);h.setLevel(+f)}}};h.setCollecting=function(f){m=!!f};h.isCollecting=function(){return m||h.COLLECT};h.setLevel=function(f){x=+f};h.setCollectAndLevel=function(f){h.setLevel(f);h.setCollectLevel(f)};h.getLevel=
function(){return x};h.setCollectLevel=function(f){e=+f};h.getCollectLevel=function(){return e};var c=[];h.logsCollection=c;h.rePrintAll=function(f,v,A,C){var k=x;if(f!==undefined)x=f;try{if(h.isCollecting()){try{if(!A)p.clear()}catch(b){}var l=C||h.logsCollection;var q=0;for(var d=0;d<l.length;d++)(function(b){var g=l[b];var n=g[3];if(n!==undefined&&x>=n){q++;if(!v)h.print.apply(h,g);else B.opentag.Timed.setTimeout(function(){if(f!==undefined)x=f;try{h.print.apply(h,g)}finally{x=k}},q*v)}})(d)}}catch(b){}finally{x=
k}};var r=w.global();var t=!!(r.webkitMediaStream||r.webkitURL||r.mozContact);h.isStyleSupported=function(){return t};var u={};h.setConsole=function(f){p=f||u;return p};h.delayPrint=-1;var z=(new Date).valueOf();h.prototype.printMessage=function(f,v,A,C){if(h.delayPrint>0){var k=h.delayPrint;var l=z-(new Date).valueOf();if(l>0)k+=l;try{B.opentag.Timed.setTimeout(function(){this.print(f,v,A,C)}.bind(this),k)}catch(q){setTimeout(function(){this.print(f,v,A,C)}.bind(this),k)}z=(new Date).valueOf()+k}else this.print(f,
v,A,C)};h.prototype.print=function(f,v,A,C){h.print(f,v,A,C)};h.print=function(f,v,A,C){if(C!==undefined&&x<C)return;try{if(p&&p.log)if(v&&h.isStyleSupported())if(A&&p[A])p[A]("%c"+f,v);else p.log("%c"+f,v);else if(A&&p[A])p[A](f);else p.log(f)}catch(k){}};h.prototype.collect=function(f,v){if(v===undefined)v=h.getCollectLevel();var A=false;var C=this.collectLogs&&h.isCollecting()&&h.getCollectLevel()>=+v;if(C){c.push(f);A=true}if(this.collectLocally&&C){this.collection.push(f);A=true}if(h.MAX_LOG_LEN>
0)if(c.length>h.MAX_LOG_LEN)c.splice(0,c.length-h.MAX_LOG_LEN);if(h.MAX_LOG_LEN>0||this.MAX_LOG_LEN>0){var k=h.MAX_LOG_LEN;if(this.MAX_LOG_LEN>0)k=this.MAX_LOG_LEN;if(this.collection.length>k)this.collection.splice(0,this.collection.length-k)}return A?f:null};h.clearAllLogs=function(){try{p.clear()}catch(f){}finally{c.splice(0,c.length)}};h.getCollectedByLevel=function(f,v){v=v||c;var A=[];for(var C=0;C<v.length;C++){var k=v[C];var l=k[0];var q=l[4];if(q===f)A.push(k)}return A};h.prototype.rePrint=
function(f,v,A){h.rePrintAll(f,v,!A,this.collection)};h.prototype.FINEST=function(f,v){a(this,"FINEST: ",false,f,v,"color:#CCCCCC;",false,h.LEVEL_FINEST)};h.prototype.FINE=function(f,v){a(this,"FINE: ",false,f,v,"color:#999999;",false,h.LEVEL_FINE)};h.prototype.INFO=function(f,v,A){a(this,"INFO: ","info",f,v,A,A,h.LEVEL_INFO)};h.prototype.WARN=function(f,v){a(this,"WARN: ","warn",f,v,"color:#26A110;",false,h.LEVEL_WARN)};h.prototype.ERROR=function(f,v){a(this,"ERROR: ","error",f,v,"color:red;",false,
h.LEVEL_ERROR)};h.setConsole(w.global().console);h.setLevelFromCookie()})();(function(){function h(b){return r.addToArrayIfNotExist(r.ANON_VARS,b)}function a(b){return b.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")}function w(b,g){var n=u.length;for(var y=0;y<n;y++)if(b===u[y][0])return u[y][1];u[u.length]=[b,g];return false}function p(b,g,n,y,D){var E=false;var G=false;var H=false;var J=false;var O=false;var U=false;var Q=false;if(g){O=!!g.all;E=O||g.nodes;J=O||g.win;G=O;Q=!!g.emptyForMaxDeep;H=
g.noFunctions&&!O;if(g.noOwn!==undefined)G=!!g.noOwn;if(g.noFunctions!==undefined)H=!!g.noFunctions;if(g.win!==undefined)J=!!g.win;if(g.nodes!==undefined)E=!!g.nodes;U=!!g.copyReference}if(n!==undefined&&!n){if(Q)return;return b}else if(n!==undefined)n--;if(!b||!(b instanceof Object))return b;if(!E){try{if(b instanceof Node)return b}catch(ga){if(b instanceof ActiveXObject&&b.nodeType!==undefined)return b}if(b===document)return b}if(!J)if(b===t)return b;var P=b instanceof Array?[]:{};if(b instanceof
Date)P=new Date(b);if(!H&&b instanceof Function){var V=String(b).replace(/\s+/g,"");if(V.indexOf("{[nativecode]}")+14===V.length)P=function(){return b.apply(D||this,arguments)};else P=function(){return b.apply(this,arguments)}}if(y===undefined){u=[];y=0}var Y=w(b,P);if(Y)return Y;var S;if(P instanceof Array)for(S=0;S<b.length;S++)if(b[S]===b[S])P[P.length]=p(b[S],g,n,y+1,b);else P[P.length]=b[S];else{S=0;for(var T in b){if(G||b.hasOwnProperty(T))if(b[T]===b[T])P[T]=p(b[T],g,n,y+1,b);else P[T]=b[T];
S++}}if(g.proto)P.prototype=p(b.prototype,g,n,y+1,b);if(U)P.___copy_ref=b;return P}function x(b,g){for(var n=0;n<g&&n<z.length;n++)if(b===z[n])return true;return false}function e(b,g,n,y,D,E,G,H){n=n||{};if(n.hasOwn===undefined)n.hasOwn=true;if(n.objectsOnly&&!(b instanceof Object))return;if(H!==undefined&&!H)return;else if(H!==undefined)H--;if(!n||!n.nodes)try{if(b instanceof Node)return}catch(V){if(b instanceof ActiveXObject&&b.nodeType!==undefined)return}if(b===t)return;if(y===undefined){z=[];
y=0}if(x(b,y))return;z[y]=b;D=D||b;if(D&&E&&D[E]!==D[E])return;var J=g(b,D,E,G);if(J)return;var O=0;var U="";for(var Q in b){if(!n.hasOwn||b.hasOwnProperty(Q))try{var P=b[Q];if(n.track)U=G?G+"."+Q:Q;e(P,g,n,y+1,D,Q,U,H)}catch(V){}O++}}var m=B.Define;var c=B.Cookie;var r=function(){};var t=m.global();m.clazz("qubit.opentag.Utils",r);r.global=m.global;r.namespace=m.namespace;r.clazz=m.clazz;r.getObjectUsingPath=function(b,g){g=g||t;var n=b.split(".");for(var y=0;y<n.length;y++)if(g&&n[y])g=g[n[y]];
return g};r.getParentObject=function(b){var g=b.lastIndexOf(".");var n=b.substring(0,g);return r.getObjectUsingPath(n)};r.variableExists=function(b){return b!==undefined&&b!==null};r.ANON_VARS=[];r.getAnonymousAcessor=function(b){var g=r.indexInArray(b,r.ANON_VARS);if(g===-1)g=h(b);return"qubit.opentag.Utils.ANON_VARS["+g+"]"};r.replaceAll=function(b,g,n){return b.replace(new RegExp(a(g),"g"),n)};r.secureText=function(b){if(typeof b!=="string")b+="";b=b.replace(/</g,"\x26lt;");b=b.replace(/>/g,"\x26gt;");
return b};r.getUrl=function(){return document.location.href};r.getQueryParam=function(b){var g;var n;var y;var D;var E;var G;var H;D=r.getUrl();if(D.indexOf("?")>0){G=D.substring(D.indexOf("?")+1).split("\x26");for(g=0,n=G.length;g<n;g+=1){E=G[g];if(E.indexOf("\x3d")>0){H=E.split("\x3d");if(H.length===2&&H[0]===b)return H[1]}}}return null};r.getElementValue=function(b){var g=document.getElementById(b);if(g)return g.textContent||g.innerText;return null};var u=[];r.objectCopy=function(b,g){g=g||{};
var n=p(b,g,g.maxDeep);u=[];return n};var z=[];r.traverse=function(b,g,n){var y;e(b,g,n,y,y,y,y,n.maxDeep)};r.prepareQuotedString=function(b){if(typeof b==="string")return'"'+b.replace(/\"/g,'\\"')+'"';else return b};r.expressionToFunction=function(b,g){g=g||"";var n="function ("+g+") {"+b+"}";return r.gevalAndReturn(n).result};r.defineWrappedClass=function(b,g,n,y,D){var E=function(){if(D)return D.apply(this,arguments);else return g.apply(this,arguments)};m.clazz(b,E,g,y);for(var G in n)if(n.hasOwnProperty(G)&&
G!=="CONSTRUCTOR")E.prototype[G]=n[G];return E};r.copyAandAddFromB=function(b,g,n){n=n||8;var y=this.objectCopy(b,{maxDeep:n});for(var D in g)if(g.hasOwnProperty(D))y[D]=g[D];return y};r.keys=function(b){if(b instanceof Object){if(Object.keys)return Object.keys(b);var g=[];for(var n in b)if(b.hasOwnProperty(n))g[g.length]=n;return g}else throw"keys() called on non-object!";};r.getSrcElement=function(b){var g;b=b||window.event;if(b.srcElement)g=b.srcElement;else if(b.target)g=b.target;return g};r.addToArrayIfNotExist=
function(b,g,n){var y=0;for(var D=false;y<b.length;y+=1){var E=n&&n(b[y],g);if(E||b[y]===g){D=true;break}}if(!D){b[b.length]=g;y=-1}return y};r.indexInArray=function(b,g){for(var n=0;n<b.length;n++)if(b[n]===g)return n;return-1};r.existsInArray=function(b,g){for(var n=0;n<b.length;n++)if(b[n]===g)return true;return false};r.removeFromArray=function(b,g){var n=0;for(var y=0;n<b.length;)if(b[n]===g){b.splice(n,1);y++}else n++;return y};r.addClass=function(b,g){var n;try{b.classList.add(g)}catch(y){if(b.className===
null){b.className=g;return}n=b.className.split(" ");r.addToArrayIfNotExist(n,g);b.className=n.join(" ")}};r.removeClass=function(b,g){var n;try{b.classList.remove(g)}catch(y){if(b.className===null){b.className="";return}n=b.className.split(" ");r.removeFromArray(n,g);b.className=n.join(" ")}};var f="try{this.qubitopentagutilsgevalandreturn__var_test__\x3d(";var v=");}catch(ex){"+"this.qubitopentagutilsgevalandreturn__var_test__error \x3d ex;}";r.gevalAndReturn=function(b){var g=M;g.qubitopentagutilsgevalandreturn__var_test__=
undefined;g.qubitopentagutilsgevalandreturn__var_test__error=undefined;b=f+b+v;r.geval(b);var n=g.qubitopentagutilsgevalandreturn__var_test__;var y=g.qubitopentagutilsgevalandreturn__var_test__error;try{g.qubitopentagutilsgevalandreturn__var_test__=X;g.qubitopentagutilsgevalandreturn__var_test__error=X;delete g.qubitopentagutilsgevalandreturn__var_test__;delete g.qubitopentagutilsgevalandreturn__var_test__error}catch(D){}return{result:n,error:y}};r.trim=function(b){try{return String(b).trim()}catch(g){return String(b).replace(/^\s+|\s+$/g,
"")}};r.setIfUnset=function(b,g){if(b&&g)for(var n in g)if(g.hasOwnProperty(n)&&!b.hasOwnProperty(n))b[n]=g[n]};var A=Math.floor(Math.random()*1E12);r.UUID=function(){if(!t.__qubit_uuid_cnt_43567bdfhgtb4vt5yeh978__)t.__qubit_uuid_cnt_43567bdfhgtb4vt5yeh978__=(new Date).valueOf();return A+"."+ ++t.__qubit_uuid_cnt_43567bdfhgtb4vt5yeh978__};r.overrideFromLeftToRight=function(b,g){if(b&&g)for(var n in g)if(g.hasOwnProperty(n))b[n]=g[n];return b};r.geval=function(b){if(window&&window.execScript)return window.execScript(b===
""?" ":b);else return function(){return t["eval"].call(t,b)}()};var C=[];r.bodyAvailable=function(b){var g=!!document.body;if(g){if(C){for(var n=0;n<C.length;n++)try{C[n]()}catch(y){}C=false}b()}else C.push(b)};r.rmCookiesMatching=function(b){var g=c.getAll();for(var n=0;n<g.length;n++){var y=g[n][0];if(y.match(b)===0)c.rm(y)}};var k=[];var l=false;var q=false;r.bodyReady=function(b){if(q){if(b)b();return true}l=l||!!(document.body&&document.readyState==="complete");if(l){q=true;for(var g=0;g<k.length;g++)try{k[g]()}catch(n){}if(b)b()}else if(b)k.push(b);
return l};var d=t.onload;t.onload=function(b){try{r.bodyReady()}catch(n){try{window.qubit.opentag.Utils.bodyReady()}catch(y){}}var g=false;try{g=d}catch(n){}if(g)g(b)};(function(){var b;var g=false;var n=1;var y;var D;var E;var G;D=function(J){var O;if(J===true)n-=1;if(!n||J!==true&&!g){if(!document.body)return setTimeout(D,1);g=true;if(J!==true){n-=1;if(n>0)return}for(;y.length>0;){O=y.shift();O()}}};G=function(){if(g)return;try{document.documentElement.doScroll("left")}catch(J){setTimeout(G,1);
return}D()};E=function(){if(y)return;y=[];if(document.readyState==="complete")return setTimeout(D,1);if(document.addEventListener){document.addEventListener("DOMContentLoaded",b,false);window.addEventListener("load",D,false)}else if(document.attachEvent){document.attachEvent("onreadystatechange",b);window.attachEvent("onload",D);var J=false;try{J=window.frameElement===null||window.frameElement===undefined}catch(O){}if(document.documentElement.doScroll&&J)G()}};var H=function(J){E();if(g)setTimeout(J,
1);else y.push(J)};if(document.addEventListener)b=function(){document.removeEventListener("DOMContentLoaded",b,false);D()};else if(document.attachEvent)b=function(){if(document.readyState==="complete"){document.detachEvent("onreadystatechange",b);D()}};H(function(){l=true;r.bodyReady()})})()})();var R={};(function(){function h(u){return u<10?"0"+u:u}function a(u){e.lastIndex=0;return e.test(u)?'"'+u.replace(e,function(z){var f=r[z];return typeof f==="string"?f:"\\u"+("0000"+z.charCodeAt(0).toString(16)).slice(-4)})+
'"':'"'+u+'"'}function w(u){return isFinite(u.valueOf())?u.getUTCFullYear()+"-"+h(u.getUTCMonth()+1)+"-"+h(u.getUTCDate())+"T"+h(u.getUTCHours())+":"+h(u.getUTCMinutes())+":"+h(u.getUTCSeconds())+"Z":null}function p(u,z){var f;var v;var A;var C;var k=m;var l;var q=z[u];if(q instanceof Date)q=w(q);else if(q instanceof String||q instanceof Number||q instanceof Boolean)q=q.valueOf();if(typeof t==="function")q=t.call(z,u,q);switch(typeof q){case "string":return a(q);case "number":return isFinite(q)?String(q):
"null";case "boolean":case "null":return String(q);case "object":if(!q)return"null";m+=c;l=[];if(Object.prototype.toString.apply(q)==="[object Array]"){C=q.length;for(f=0;f<C;f+=1)try{l[f]=p(f,q)||"null"}catch(d){l[f]='{"stack_exceeded": null}'}A=l.length===0?"[]":m?"[\n"+m+l.join(",\n"+m)+"\n"+k+"]":"["+l.join(",")+"]";m=k;return A}if(t&&typeof t==="object"){C=t.length;for(f=0;f<C;f+=1)if(typeof t[f]==="string"){v=t[f];try{A=p(v,q)}catch(d){A='{"stack_exceeded": null}'}if(A)l.push(a(v)+(m?": ":":")+
A)}}else for(v in q)if(Object.prototype.hasOwnProperty.call(q,v)){try{A=p(v,q)}catch(d){A='{"stack_exceeded": null}'}if(A)l.push(a(v)+(m?": ":":")+A)}A=l.length===0?"{}":m?"{\n"+m+l.join(",\n"+m)+"\n"+k+"}":"{"+l.join(",")+"}";m=k;return A}}var x=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;var e=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;var m;var c;var r=
{"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};var t;if(typeof R.stringify!=="function")R.stringify=function(u,z,f){var v;m="";c="";if(typeof f==="number")for(v=0;v<f;v+=1)c+=" ";else if(typeof f==="string")c=f;t=z;if(z&&typeof z!=="function"&&(typeof z!=="object"||typeof z.length!=="number"))throw new Error("JSON.stringify");return p("",{"":u})};if(typeof R.parse!=="function")R.parse=function(u,z){function f(A,C){var k;var l;var q=A[C];if(q&&typeof q==="object")for(k in q)if(Object.prototype.hasOwnProperty.call(q,
k)){l=f(q,k);if(l!==undefined)q[k]=l;else delete q[k]}return z.call(A,C,q)}var v;u=String(u);x.lastIndex=0;if(x.test(u))u=u.replace(x,function(A){return"\\u"+("0000"+A.charCodeAt(0).toString(16)).slice(-4)});if(/^[\],:{}\s]*$/.test(u.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){v=eval("("+u+")");return typeof z==="function"?f({"":v},""):v}throw new SyntaxError("JSON.parse");}})();
var I={};I.html=I.html||{};(function(){function h(c){return c.replace(/^\s+/,"").replace(/\s+$/,"")}var a={callbacks:{},unfired_events:[],early_callbacks:null,currentUV:null};var w;var p="universal_variable";var x=0;var e=500;var m;a._isArray=function(c){return Object.prototype.toString.call(c)==="[object Array]"};a._targetChanged=function(c,r,t){var u;var z;var f;if(t===null)if(r==="null")return false;else return true;else if(t===undefined)if(r===t)return false;else return true;else{u=R.parse(r);
z=a._getNested(u,c);f=a._getNested(t,c);return!a._jsonIsEqual(z,f)}};a._processCallbacks=function(){var c;if(a.early_callbacks&&a.early_callbacks.length>0){for(c=0;c<a.early_callbacks.length;c+=1)a.push(a.early_callbacks[c]);a.early_callbacks=null}};a._keyStringToArr=function(c){c=h(c);if(c==="")return[];else{c=c.replace(/\[(\w+)\]/g,".$1");c=c.replace(/^\./,"");return c.split(".")}};a._getNested=function(c,r){var t=a._keyStringToArr(r);for(var u;t.length>0;){u=t.shift();if(c.hasOwnProperty(u))c=
c[u];else return}return c};a._jsonIsEqual=function(c,r){if(typeof c!=="string")c=R.stringify(c,a._stripEvents);if(typeof r!=="string")r=R.stringify(r,a._stripEvents);return c===r};a._stripEvents=function(c,r){if(c!=="events")return r;else return undefined};a._on=function(c,r){var t;var u;t=c.split(":");c=t[0];u=t[1];a.callbacks[c]=a.callbacks[c]||[];if(u)a.callbacks[c].push({keyString:u,func:r});else a.callbacks[c].push({func:r})};a._trigger=function(c,r){var t;var u;if(a.callbacks[c])for(t=0;t<a.callbacks[c].length;t+=
1)if(typeof a.callbacks[c][t].func==="function"){u=a.callbacks[c][t].keyString;if(u){if(c==="change"&&a._targetChanged(u,a.currentUV,w))a.callbacks[c][t].func(r)}else a.callbacks[c][t].func(r)}};a._eventsPush=function(c){var r;var t;w.events[w.events.length]=c;c.time=c.time||(new Date).getTime();if(a.callbacks.event){r=0;t=a.callbacks.event.length;for(r;r<t;r+=1)a.callbacks.event[r].func(c)}c.has_fired=true};a._getUnfiredEvents=function(){var c=0;for(c=0;c<w.events.length;c+=1)if(!w.events[c].has_fired){a.unfired_events.push(w.events.splice(c,
1)[0]);c-=1}};a._fireEvents=function(){for(;a.unfired_events.length>0;)w.events.push(a.unfired_events.shift())};a._resetEventsPush=function(){w.events=w.events||[];if(w.events.push.toString().indexOf("[native code]")!==-1){w.events.push=a._eventsPush;a._getUnfiredEvents();a._fireEvents()}};a._checkForChanges=function(){if(a.callbacks.change&&a.callbacks.change.length>0)if(!a._jsonIsEqual(a.currentUV,w)){a._trigger("change",w);a.currentUV=R.stringify(w,a._stripEvents)}};a._setUVLocation=function(c){p=
c;a._initUV()};a._initUV=function(){window[p]=window[p]||{events:[]};w=window[p];if(!w.events)w.events=[]};a.push=function(c){if(!a._isArray(c))return;if(c[0]==="on")a._on(c[1],c[2]);else if(c[0]==="trigger"&&c[1])a._trigger(c[1])};a.init=function(c,r){if(r)p=r;a._initUV();if(!window.uv_listener||a._isArray(window.uv_listener)){a.early_callbacks=window.uv_listener||null;window.uv_listener=a;if(!c)a.start()}else if(r)window.uv_listener._setUVLocation(p)};a.start=function(){a.currentUV=R.stringify(w,
a._stripEvents);m=setInterval(function(){a._initUV();a._resetEventsPush();a._checkForChanges()},e);a._processCallbacks()};I.html.UVListener=a})();(function(){function h(w){if(w){this._rate=w.rate||10;this._smallestRate=-1;if(w.start)this.startPooling();this.config=w}this.inervals=[];this._lck_obj={};this._binded_pool=this._pool.bind(this)}B.Define.clazz("qubit.opentag.Timer",h);h.prototype.timers=[];h.prototype.startPooling=function(w){if(w&&this.config.dynamic)if(this._smallestRate<0||this._smallestRate>
w)this._smallestRate=Math.min(Math.floor(w/2),1500);if(!this.started){this.started=true;setTimeout(this._binded_pool,0)}};h.prototype._pool=function(){this.maxFrequent(function(){var p="";if(this.config&&this.config.name)p="["+this.config.name+"]"},5E3,this._lck_obj);this.callTimers();if(this.timers.length!==0){var w=this._smallestRate>this._rate?this._smallestRate:this._rate;setTimeout(this._binded_pool,w)}else{this.started=false;this._smallestRate=-1}};h.prototype.callTimers=function(){this.lastCalled=
(new Date).valueOf();for(var w=0;w<this.timers.length;w++){var p=this.timers[w];var x=(new Date).valueOf();if(x>=p.time){try{p.execute()}catch(e){}this.timers.splice(w,1);--w}}};h.prototype.cancellAll=function(){this.timers=[]};h.prototype.setRate=function(w){this._rate=w};h.prototype.maxFrequent=function(w,p,x){if(!x){w.__maxFrequent__timer_opentag_qubit_=w.__maxFrequent__timer_opentag_qubit_||{};x=w.__maxFrequent__timer_opentag_qubit_}var e=x.____last__timed__max__frequent____;if(!e||(new Date).valueOf()-
e>p){e=(new Date).valueOf();x.____last__timed__max__frequent____=e;w()}};h.prototype.runIfNotScheduled=function(w,p,x){x=x||w;if(x.__lastRun__&&(new Date).valueOf()<p+x.__lastRun__)return this.schedule(w,p,x);else{x.__lastRun__=(new Date).valueOf();w();return true}};h.prototype.schedule=function(w,p,x){if(x.___scheduled___)return false;else{x.___scheduled___=(new Date).valueOf();this.setTimeout(function(){x.___scheduled___=false;x.__lastRun__=(new Date).valueOf();w()},p);return true}};var a=1;h.prototype.setTimeout=
function(w,p){var x={id:a++,time:(new Date).valueOf()+ +p,execute:w};this.timers.push(x);this.startPooling(p);return x};h.prototype.setInterval=function(w,p){var x=setInterval(w,p);this.inervals.push(x);return x}})();(function(){B.Define.namespace("qubit.opentag.Timed",new B.opentag.Timer({rate:37,dynamic:true}));var h=B.opentag.Timed;h.tillTrue=function(a,w,p){var x=function(){if(!a())h.setTimeout(x,p||33);else w()};x()}})();I.html.fileLoader={};I.html.fileLoader.load=function(h,a,w,p,x,e){var m;
var c;var r;var t;var u;u=false;t=function(z){return function(){if(!u){u=true;if(z&&!r)r={url:document.location.href};w(h,r,z)}}};try{if(a)c=a(h)}catch(z){c=false;w(h,"Exception loading pre",true)}finally{if(c!==false){m=I.html.fileLoader.createScriptEl(h,x,false,e);if(w){m.onload=t(false);m.onerror=t(true);m.onreadystatechange=function(){if(this.readyState==="complete"||this.readyState==="loaded")setTimeout(function(){t(false)()},1)}}if(!p)p=window.document.getElementsByTagName("head")[0];p.appendChild(m)}}};
I.html.fileLoader.createScriptEl=function(h,a,w,p){var x;var e=document.createElement("script");e.type="text/javascript";e.src=I.html.fileLoader.tidyUrl(h)+(w?"?"+(new Date).getTime():"");if(a!==false){e.async="true";e.defer="true"}else{e.async="false";if(e.async!==false)e.async=false;e.defer="false";if(e.defer!==false)e.defer=false}for(x in p)if(p.hasOwnProperty(x))e.setAttribute(x,p[x]);return e};I.html.fileLoader.tidyUrl=function(h){if(h.substring(0,5)==="http:")return h;if(h.substring(0,6)===
"https:")return h;return"//"+h};(function(){function h(p){this.calls={}}var a=B.Define;var w=B.opentag.Utils;h.prototype.on=function(p,x){if(!this.calls[p])this.calls[p]=[];return w.addToArrayIfNotExist(this.calls[p],x)};h.prototype.call=function(p,x){var e=this.calls[p];if(e)for(var m=0;m<e.length;m++)try{e[m](x)}catch(c){}};h.prototype.remove=function(p,x){if(this.calls[p])return w.removeFromArray(this.calls[p],x);return null};h.prototype.removeAll=function(p){var x=0;for(var e in this.calls)if(this.calls.hasOwnProperty(e))x+=
w.removeFromArray(this.calls[e],p);return x};h.prototype.clear=function(){this.calls={}};a.clazz("qubit.Events",h)})();(function(){function h(e){this.log=new B.opentag.Log("",function(){return this.CLASS_NAME+"["+this.config.name+"]"}.bind(this),"collectLogs");this.config={order:0,include:true,name:"Filter-"+w++,script:undefined,session:undefined,restartable:true};this.runtimeId=a.UUID();this.session=null;if(e){for(var m in e)if(e.hasOwnProperty(m))this.config[m]=e[m];if(e.session)this.setSession(e.session);
this.register(this)}this.events=new B.Events({})}var a=B.opentag.Utils;var w=0;var p=[];B.Define.clazz("qubit.opentag.filter.BaseFilter",h);h.state={DISABLED:-3,SESSION:-2,PASS:-1,FAIL:0};var x="restart";h.prototype.EVENT_TYPES={RESTART_EVENT:x};h.prototype.prepareForRestart=function(){if(this.config.restartable){this.events.call(x,this);this.reset()}};h.prototype.onRestart=function(e){this.events.on(x,e)};h.prototype.reset=function(){this.runtimeId=a.UUID();this.enable()};h.prototype.disable=function(){this.config.disabled=
true};h.prototype.enable=function(){this.config.disabled=false};h.prototype.match=function(){return true};h.prototype.setSession=function(e){this.session=e};h.prototype.getSession=function(){return this.session};h.prototype.getState=function(){var e=h.state.PASS;if(this.config.disabled)return h.state.DISABLED;if(this.config.script)e=this.config.script.call(this,e);if(isNaN(+e))e=h.state.FAIL;this.lastState=+e;return e};h.getFilters=function(){return p};h.prototype.register=function(){h.register(this)};
h.register=function(e){a.addToArrayIfNotExist(p,e)}})();(function(){var h=B.Define;var a={CONTAINS:"CONTAINS",MATCHES_EXACTLY:"MATCHES_EXACTLY",STARTS_WITH:"STARTS_WITH",ENDS_WITH:"ENDS_WITH",REGULAR_EXPRESSION:"REGULAR_EXPRESSION",ALL_URLS:"ALL_URLS"};h.namespace("qubit.opentag.filter.pattern.PatternType",a)})();(function(){function h(e){this._lockObject={};var m={patternType:x.CONTAINS,pattern:""};if(e)for(var c in e)if(e.hasOwnProperty(c))m[c]=e[c];h.SUPER.call(this,m)}var a=B.opentag.Utils;var w=
B.opentag.filter.BaseFilter;var p=B.opentag.Timed;var x=B.opentag.filter.pattern.PatternType;B.Define.clazz("qubit.opentag.filter.URLFilter",h,w);h.prototype.PATTERNS=x;h.prototype.getURL=function(e){return e||a.getUrl()};h.prototype.match=function(e){e=this.getURL(e);var m=true;var c=this.config.pattern;switch(this.config.patternType){case x.CONTAINS:m=e.toLowerCase().indexOf(c.toLowerCase())>=0;break;case x.MATCHES_EXACTLY:m=e.toLowerCase()===this.config.pattern.toLowerCase();break;case x.STARTS_WITH:m=
e.toLowerCase().indexOf(c.toLowerCase())===0;break;case x.ENDS_WITH:m=e.lastIndexOf(c.toLowerCase())+c.length===e.length;break;case x.REGULAR_EXPRESSION:m=(new RegExp(c)).test(e);break;case x.ALL_URLS:m=true;break}return m}})();(function(){function h(e){var m={};if(e){for(var c in e)if(e.hasOwnProperty(c)){if(c==="customStarter"&&e[c])this.customStarter=e[c];else if(c==="customScript"&&e[c])this.customScript=e[c];m[c]=e[c]}this.uid="f"+x++}this.tagsToRun=[];h.SUPER.call(this,m)}var a=B.opentag.filter.BaseFilter;
var w=B.opentag.filter.URLFilter;var p=B.opentag.Utils;var x=0;B.Define.clazz("qubit.opentag.filter.Filter",h,w);h.prototype.customStarter=function(e,m,c){m(false)};h.prototype.isSession=function(){if(this.config.sessionDisabled)return false;if(this.customStarter===null&&this.customScript===null)return false;return true};h.prototype.customScript=function(e){return true};h.prototype.match=function(e){var m=true;try{if(this.customScript){if(this._matchState===undefined)this._matchState=!!this.customScript(this.getSession());
m=this._matchState}}catch(c){m=false}return m&&h.SUPER.prototype.match.call(this,e)};h.prototype.runTag=function(e){p.addToArrayIfNotExist(this.tagsToRun,e);if(!this.starterExecuted){if(!this._starterWasRun){this._starterWasRun=true;var m=this.runtimeId;var c=function(r){if(m!==this.runtimeId)return;this.reRun=r;this.starterExecuted=(new Date).valueOf();this._processQueuedTagsToRun()}.bind(this);if(this.customStarter)this.customStarter(this.getSession(),c,e);else h.prototype.customStarter.call(this,
this.getSession(),c,e)}}else this._triggerTag(e)};h.prototype._processQueuedTagsToRun=function(){for(var e=0;e<this.tagsToRun.length;e++){var m=this.tagsToRun[e];this._triggerTag(m)}};h.prototype._triggerTag=function(e){if(this.reRun===true)e.run();else e.runOnce()};h.prototype.getState=function(e){if(e)this.setSession(e);var m=h.SUPER.prototype.getState.call(this);if(m===a.state.DISABLED)return a.state.DISABLED;if(m===a.state.PASS)if(this.isSession())m=a.state.SESSION;if(this.config.script)m=this.config.script.call(this,
m,this.getSession());this.lastState=m;return m};h.prototype.reset=function(){h.SUPER.prototype.reset.call(this);this._matchState=undefined;this._starterWasRun=undefined;this.starterExecuted=undefined;this.tagsToRun=[];this.reRun=undefined}})();I.html.GlobalEval={};I.html.GlobalEval.globalEval=function(h){if(window.execScript)window.execScript(h===""?" ":h);else{var a=function(){window["eval"].call(window,h)};a()}};I.html.HtmlInjector={};I.html.HtmlInjector.inject=function(h,a,w,p,x){var e;var m;var c;
var r;var t;var u;var z;if(w.toLowerCase().indexOf("\x3cscript")>=0){c=document.createElement("div");c.innerHTML="a"+w;r=c.getElementsByTagName("script");t=[];for(e=0,m=r.length;e<m;e+=1)t.push(r[e]);z=[];for(e=0,m=t.length;e<m;e+=1){u=t[e];var f={attributes:I.html.HtmlInjector.getAttributes(u)};if(u.src)f.src=u.src;else f.script=u.innerHTML;z.push(f);u.parentNode.removeChild(u)}if(c.innerHTML)if(c.innerHTML.length>0)c.innerHTML=c.innerHTML.substring(1);I.html.HtmlInjector.doInject(h,a,c);I.html.HtmlInjector.loadScripts(z,
0,p,h)}else{c=document.createElement("div");c.innerHTML=w;I.html.HtmlInjector.doInject(h,a,c);if(p)p()}};I.html.HtmlInjector.doInject=function(h,a,w){if(w.childNodes.length>0){for(var p=document.createDocumentFragment();w.childNodes.length>0;)p.appendChild(w.removeChild(w.childNodes[0]));if(a)I.html.HtmlInjector.injectAtStart(h,p);else I.html.HtmlInjector.injectAtEnd(h,p)}};I.html.HtmlInjector.injectAtStart=function(h,a){if(h.childNodes.length===0)h.appendChild(a);else h.insertBefore(a,h.childNodes[0])};
I.html.HtmlInjector.injectAtEnd=function(h,a,w){if(!w)w=1;if(h===document.body&&document.readyState!=="complete"&&w<50)setTimeout(function(){I.html.HtmlInjector.injectAtEnd(h,a,w+1)},100);else h.appendChild(a)};I.html.HtmlInjector.loadScripts=function(h,a,w,p){var x;var e;var m=false;for(x=h.length;a<x;a+=1){e=h[a];if(e.src){m=true;break}else I.html.GlobalEval.globalEval(e.script)}if(m)I.html.fileLoader.load(e.src,null,function(){I.html.HtmlInjector.loadScripts(h,a+1,w,p)},p,false,e.attributes);if(w&&
a===x)w()};I.html.HtmlInjector.getAttributes=function(h){var a;var w;var p;var x;var e;var m={};if(h){p=h.attributes;w=p.length;for(a=0;a<w;a++){x=p[a].value;e=p[a].name.toLowerCase();if(x!==""&&(e==="id"||e==="class"||e==="charset"||e.substr(0,5)==="data-"))m[e]=x}return m}};(function(){function h(){z=z||{write:document.write,writeln:document.writeln}}function a(){document.write=z.write;document.writeln=z.writeln;z=null}var w=B.opentag.filter.BaseFilter;var p=B.opentag.Utils;var x=I.html.HtmlInjector;
var e=I.html.fileLoader;var m=B.opentag.filter.Filter;var c=function(){};B.Define.clazz("qubit.opentag.TagsUtils",c);var r=false;c.bodyLoaded=function(){if(r)return true;r=!!(document.body&&document.readyState!=="loading");return r};c.bodyAvailable=function(d){return!!document.body};var t={};var u={SUCCESS:"success",FAIL:"failure",INIT:"not started"};c.loadScript=function(d){var b=d.url;var g=function(D,E,G){t[b].error=E;if(G){t[b].state=u.FAIL;d.onerror()}else{t[b].state=u.SUCCESS;d.onsuccess()}};
if(t[b]){if(d.noMultipleLoad)return g(b,t[b].error,t[b].state===u.FAIL);t[b].count+=1}else t[b]={count:1,state:null};var n=!d.async;var y=c.bodyLoaded();if(n&&y);n=n&&!y;if(n)c.writeScriptURL(b,function(D,E){g(b,E,!D)});else e.load(b,false,g,d.node,d.async)};var z=null;c.redirectDocumentWritesToArray=function(d,b){var g=d;h();document.write=function(n){g.push(n)};document.writeln=function(n){g.push(n)}};c.flushDocWritesArray=function(d,b,g,n,y){var D=b;if(D&&d){var E=d.splice(0,d.length);try{c.injectHTML(D,
g,E.join("\n"),y||N);return true}catch(H){}}else{var G="Flushing location not found!";return false}if(y)y();return true};c.unlockDocumentWrites=function(){if(z)a()};var f=c.prototype.PACKAGE_NAME+".TagsUtils._writeScriptURL_callbacks";var v={};B.Define.namespace(f,v,M,true);var A=0;var C=(new Date).valueOf();c.writeScriptURL=function(d,b){var g="_"+C+"_"+A++;var n=f+"."+g;var y=false;v[g]=function(O){if(y)return;y=true;if(O)b(false,"error while loading script "+d);else b(true);v[g]=undefined;delete c.writeScriptURL.callbacks[g]};
var D='if(this.readyState \x3d\x3d\x3d "loaded" || '+'this.readyState \x3d\x3d\x3d "complete"){ try {'+n+"(true)"+"} catch (ex) {}}";var E="try{"+n+"(false)}catch(ex){}";var G="try{"+n+"(true)}catch(ex){}";var H="scr";var J;d=e.tidyUrl(d);J="\x3c"+H+"ipt onload\x3d'"+E+"'  onerror\x3d'"+G+"' onreadystatechange\x3d'"+D+"' type\x3d'text/javascript' "+" src\x3d'"+d+"'\x3e"+"\x3c/"+H+"ipt\x3e";if(z){a();document.write(J);h()}else document.write(J);p.bodyReady(function(){if(!y){y=true;b(true)}})};c.writeScriptURL.callbacks=
{};var k=w.state.SESSION;var l=w.state.PASS;var q=w.state.FAIL;c.filtersState=function(d,b,g,n){d=d.sort(function(T,ga){try{var da=ga.config.order;var ea=T.config.order;if(isNaN(-ea))ea=0;if(isNaN(-da))da=0;return da-ea}catch(ja){return 0}});var y=l;if(!d||d.length===0)return y;var D=null;var E=false;var G=false;var H=0;var J;var O;var U=[];var Q;var P;for(var V=0;V<d.length;V++){Q=d[V];Q.setSession(b);if(Q.match()){J=Q.getState();if(J>0){if(H===0||H>J)H=J}else if(J===w.state.DISABLED)E=true;else if(J===
k){G=true;D=Q;O=Q;U.push(Q)}else D=Q}else P=Q}var Y=false;if(D===null){Y=true;if(!E)y=q;else y=l}else if(D.config.include)y=J;else y=J===l?q:l;if(H>0&&(y===l||Y))y=H;if(y===k||y===l&&G){if(!O.config.include)return q;y=k;if(O instanceof m&&O.isSession())if(n)for(var S=0;S<U.length;S++)try{U[S].runTag(g)}catch(T){}}if(g.config.dedupe&&y===l)if(P&&P instanceof m&&P.isSession()){g.sendDedupePing=true;y=q}return y};c.injectHTML=function(d,b,g,n){return x.inject(d,!b?1:0,g,n||N)};c.getHTMLLocationForTag=
function(d){var b;var g=d.prepareLocationObject(d.config.locationObject);switch(g){case "HEAD":b=document.getElementsByTagName("head")[0];break;case "BODY":b=document.body;break;default:if(g)b=document.getElementById(g);else b=document.body}return b}})();(function(){function h(c){this.config={};this.handlers=[];this.parameters=null;this.callHandlersOnRead=false;if(c){this.uniqueId="BV"+x++;h.ALL_VARIABLES[this.uniqueId]=this;for(var r in c)if(c.hasOwnProperty(r)){this.config[r]=c[r];if(r==="value")this.value=
c.value}var t=h.register(this);if(t&&t!==this);return t}}function a(){if(m)return false;for(var c=0;c<e.length;c++)try{var r=e[c];r.getValue()}catch(t){}p.setTimeout(a,h.CHECK_POLL_RATE);return true}var w=B.opentag.Utils;var p=B.opentag.Timed;var x=0;B.Define.clazz("qubit.opentag.pagevariable.BaseVariable",h);h.ALL_VARIABLES={};var e=[];h.OBSERVED_VARIABLES=e;h.pageVariables=[];h.register=function(c){if(c instanceof h){for(var r=0;r<h.pageVariables.length;r++){var t=h.pageVariables[r];if(c===t)return t}h.pageVariables.push(c);
return c}return null};h.prototype.getValue=function(){this._updateCurrentValue(this.value);return this.currentValue};h.prototype._updateCurrentValue=function(c){if(!this.valuesAreEqual(c,this.currentValue)){this.oldValue=this.currentValue;this.currentValue=c;if(!m||this.callHandlersOnRead)this._handleValueChanged();return true}return false};h.prototype.getDefaultValue=function(){return this.defaultValue};h.prototype.setDefaultValue=function(c){this.defaultValue=c};h.prototype.exists=function(c){var r=
w.variableExists(this.getValue());if(c)r=r||w.variableExists(this.getDefaultValue());return r};h.prototype.getRelativeValue=function(c,r){var t=this.getValue();if(!w.variableExists(t))t=r;var u;if(c&&!w.variableExists(t)){u=this.getDefaultValue();if(w.variableExists(u))t=u}return t};h.prototype.replaceToken=function(c,r,t,u){var z=this.exists();var f=z?this.getValue():t;c="\\$\\{"+c+"\\}";if(u||f instanceof Array){var v;if(z)v=this.getValueAccessorString();else v=w.getAnonymousAcessor(f);return r.replace(new RegExp(c,
"g"),v)}else return r.replace(new RegExp(c,"g"),f)};h.prototype.getAccessorString=function(){return"qubit.opentag.pagevariable.BaseVariable.ALL_VARIABLES."+this.uniqueId};h.prototype.getValueAccessorString=function(){return this.getAccessorString()+".getValue()"};h.prototype.onValueChanged=function(c,r){if(w.addToArrayIfNotExist(this.handlers,c)===-1);if(r!==false)this.startObservingForChanges()};h.prototype.deatchOnValueChanged=function(c){if(w.removeFromArray(this.handlers,c)>0);};h.prototype._handleValueChanged=
function(){var c={oldValue:this.oldValue,newValue:this.currentValue,variable:this};for(var r=0;r<this.handlers.length;r++)try{this.handlers[r](c)}catch(t){}};var m=true;h.CHECK_POLL_RATE=333;h.prototype.startObservingForChanges=function(){this.addToObservedVariables();if(m){m=false;a()}};h.prototype.stopObservingForChanges=function(){this.removeFromObservedVariables();if(e.length===0)m=true};h.prototype.addToObservedVariables=function(){w.addToArrayIfNotExist(e,this)};h.prototype.removeFromObservedVariables=
function(){w.removeFromArray(e,this)};h.prototype.getObservedVariables=function(){return e};h.prototype.valuesAreEqual=function(c,r){return c===r}})();(function(){function h(p){this._lockExprObject={};h.SUPER.apply(this,arguments)}var a=B.opentag.Utils;var w=B.opentag.Timed;B.Define.clazz("qubit.opentag.pagevariable.Expression",h,B.opentag.pagevariable.BaseVariable);h.prototype.getValue=function(){var p;var x;var e=this.value;try{if(e&&e.indexOf("[#]")===-1){var m=a.gevalAndReturn(e);p=m.result;this.failMessage=
null;x=m.error}else p=h.parseUVArray(e)}catch(t){x=t}if(x){var c="could not read value of expression: \n"+e+"\nexact cause: "+x;if(this.failMessage!==c)this.failMessage=c;p=null}var r=this._updateCurrentValue(p);return p};h.parseUVArray=function(p){var x=p.split("[#]");var e=a.gevalAndReturn(x[0]).result;var m=[];var c=x[1];if(c.indexOf(".")===0)c=c.replace(".","");for(var r=0;r<e.length;r++){var t=a.getObjectUsingPath(c,e[r]);m.push(t)}return m};h.prototype.replaceToken=function(p,x,e,m){if(this.getValue()instanceof
Array)m=true;return h.SUPER.prototype.replaceToken.call(this,p,x,e,m)}})();(function(){function h(w){h.SUPER.apply(this,arguments)}var a=B.opentag.Utils;B.Define.clazz("qubit.opentag.pagevariable.DOMText",h,B.opentag.pagevariable.BaseVariable);h.prototype.getValue=function(){var w=a.getElementValue(this.value);this._updateCurrentValue(w);return w}})();(function(){function h(a){h.SUPER.apply(this,arguments);this._lockObject={}}B.Define.clazz("qubit.opentag.pagevariable.Cookie",h,B.opentag.pagevariable.BaseVariable);
h.prototype.getValue=function(){var a=B.Cookie.get(this.value);this._updateCurrentValue(a);return a}})();(function(){function h(w){h.SUPER.apply(this,arguments)}var a=B.opentag.Utils;B.Define.clazz("qubit.opentag.pagevariable.URLQuery",h,B.opentag.pagevariable.BaseVariable);h.prototype.getValue=function(){var w=a.getQueryParam(this.value);this._updateCurrentValue(w);return w}})();(function(){function h(a){h.SUPER.apply(this,arguments)}B.Define.clazz("qubit.opentag.pagevariable.UniversalVariable",
h,B.opentag.pagevariable.Expression)})();(function a(){function w(){function p(l){C.level=l}function x(l,q){C.info(l,"event emitted");q=u(q||{});q.meta=q.meta||{};q.meta.type=l;v.push(q);c();k.listeners=f(k.listeners,function(d){return!d.disposed})}function e(l,q,d){function b(){C.info("Replaying events");m(function(){t(k.events,function(D){if(n.disposed)return;if(!z(l,D.meta.type))return;q.call(d,D)})});return y}function g(){C.info("Disposing event handler");n.disposed=true;return y}C.info("Attaching event handler for",
l);var n={type:l,callback:q,disposed:false,context:d||window};k.listeners.push(n);var y={replay:b,dispose:g};return y}function m(l){C.info("Calling event handlers");A++;try{l()}catch(q){C.error("UV API Error",q.stack)}A--;c()}function c(){if(v.length===0)C.info("No more events to process");if(v.length>0&&A>0)C.info("Event will be processed later");if(v.length>0&&A===0){C.info("Processing event");var l=v.shift();k.events.push(l);m(function(){t(k.listeners,function(q){if(q.disposed)return;if(!z(q.type,
l.meta.type))return;try{q.callback.call(q.context,l)}catch(d){C.error("Error emitting UV event",d.stack)}})})}}function r(l,q,d){var b=k.on(l,function(){q.apply(d||window,arguments);b.dispose()});return b}function t(l,q){var d=l.length;for(var b=0;b<d;b++)q(l[b],b)}function u(l){var q={};for(var d in l)if(l.hasOwnProperty(d))q[d]=l[d];return q}function z(l,q){return typeof l==="string"?l===q:l.test(q)}function f(l,q){var d=l.length;var b=[];for(var g=0;g<d;g++)if(q(l[g]))b.push(l[g]);return b}var v=
[];var A=0;var C={info:function q(){if(C.level>p.INFO)return;if(console&&console.info)console.info.apply(console,arguments)},error:function d(){if(C.level>p.ERROR)return;if(console&&console.error)console.error.apply(console,arguments)}};p.ALL=0;p.INFO=1;p.ERROR=2;p.OFF=3;p(p.ERROR);var k={on:e,emit:x,once:r,events:[],listeners:[],logLevel:p};return k}if(typeof module==="object"&&module.exports)module.exports=w;else if(window&&window.uv===undefined)window.uv=w()})();var ba={};var aa=[];var fa=false;
var ca=false;var ia=B.Define.global();var ha={allEventsByType:ba,subscribe:function(a,w){if(ca){var p=L();p.on(a,w)}else aa.push({on:[a,w]})},getEventHistory:function(a){return this.allEventsByType[a]},publish:function(a,w){if(ca){var p=L();p.emit(a,w)}else aa.push({emit:[a,w]})},connect:function(){F()}};ha.connect();B.Define.namespace("qubit.qprotocol.PubSub",ha);(function(){function a(e){a.SUPER.apply(this,arguments)}var w=B.qprotocol.PubSub;var p=B.opentag.Utils;var x=":";B.Define.clazz("qubit.opentag.pagevariable.QProtocolVariable",
a,B.opentag.pagevariable.BaseVariable);a.prototype.init=function(){if(this.initialized)return false;else this.initialized=(new Date).valueOf();this.callHandlersOnRead=true;if(!this.handlerAttached){var e=this;var m=this.getValueAndPath(this.value);this.eventName=m[0];this.objectPath=m[1];this.updateValue();w.subscribe(this.eventName,function(c){e.updateValue(c)});this.handlerAttached=(new Date).valueOf()}};a.prototype.getValueAndPath=function(e){var m=e;var c;if(m){var r=e.indexOf(x);if(r!==-1){m=
e.substring(0,r);c=e.substring(r+1)}}return[m,c]};a.prototype.getValue=function(){this.init();return this.currentValue};a.prototype.getEventsHistory=function(){return w.getEventHistory(this.eventName)};a.prototype.updateValue=function(e){if(!e){var m=this.getEventsHistory();if(m)e=m.current}var c;var r=this.objectPath;if(e&&r)c=p.getObjectUsingPath(r,e);else c=e;this._updateCurrentValue(c);return c};a.prototype.startObservingForChanges=function(){};a.prototype.stopObservingForChanges=function(){}})();
(function(){function a(){}function w(l,q){var d=[];try{var b=l.parameters;if(b)for(var g=0;g<b.length;g++)if(l.getVariableForParameter(b[g])===q)d.push(b[g])}catch(n){}return d}var p=B.opentag.Utils;var x=B.opentag.TagsUtils;var e=B.opentag.Timed;var m=B.opentag.pagevariable.BaseVariable;var c=B.opentag.pagevariable.Expression;var r=B.opentag.pagevariable.UniversalVariable;var t=B.opentag.pagevariable.DOMText;var u=B.opentag.pagevariable.Cookie;var z=B.opentag.pagevariable.URLQuery;B.Define.clazz("qubit.opentag.TagHelper",
a);a.injectHTMLForLoader=function(l,q,d,b){var g=b!==undefined?b:l.getHtml();if(g){var n=l.config.locationPlaceHolder==="END";var y=x.getHTMLLocationForTag(l);l.injectHTMLNotFinished=true;try{if(y)x.injectHTML(y,n,g,function(){l.injectHTMLNotFinished=false;if(q)try{q()}catch(D){}}.bind(l));else if(d&&document.readyState==="loading"){document.write(g);l.injectHTMLNotFinished=false}else l.injectHTMLFailed=(new Date).valueOf()}catch(D){l.injectHTMLNotFinished=false;l.injectHTMLFailed=(new Date).valueOf()}}};
a.getAllVariablesWithParameters=function(l){var q=l.getPageVariables();var d=[];for(var b=0;b<q.length;b++){var g=q[b];var n=w(l,g);for(var y=0;y<n.length;y++)d.push({parameter:n[y],variable:g})}return d};var f={};a.allParameterVariablesReadyForTag=function(l,q){var d=q;var b=true;var g=l.getPageVariables();for(var n=0;n<g.length;n++){var y=g[n];try{var D=w(l,y);var E=y.exists();if(!E&&d){if(D.length>0)E=!!D[0].defaultValue;E=E||y.exists(true)}if(!E){b=false;break}}catch(G){b=false;break}}return b};
var v="2";var A="3";var C="4";var k="5";a.validateAndGetVariableForParameter=function(l){if(l.hasOwnProperty("variable")&&l.variable)l.variable=a.initPageVariable(l.variable);return l.variable};a.initPageVariable=function(l){if(!l||l instanceof m)return l;if(typeof l==="string"){var q=p.getObjectUsingPath(l);if(q&&q instanceof m)return q}switch(l.type){case v:return new c(l);case A:return new z(l);case C:return new u(l);case k:return new t(l);case "EPRESSION":return new c(l);case "URL_PARAMETER":return new z(l);
case "COOKIE_VALUE":return new u(l);case "DOM_VALUE":return new t(l);default:return new m(l)}}})();(function(){function a(f){this.log=new r("",function(){return this.CLASS_NAME+"["+this.config.name+"]"}.bind(this),"collectLogs");this.urlsLoaded=0;this.urlsFailed=0;this.runCounter=0;this.events=new B.Events({});this._depLoadedHandler=function(){if(this.dependenciesLoaded()&&this.awaitingDependencies)this._triggerLoadingAndExecution()}.bind(this);this.config={name:"Tag-"+c++,async:true,usesDocumentWrite:false,
timeout:this.LOADING_TIMEOUT,dependencies:[],url:null,urlLocation:null,locationPlaceHolder:"END",locationObject:null,dontWaitForInjectionLocation:false,noMultipleLoad:false,loadDependenciesOnLoad:false,restartable:true};this.restartCounter=0;this.cancelled=false;this.runtimeId=p.UUID();this.delayDocWrite=false;this.dependencies=[];this._lockObject={count:0};this._lockObjectDepsLoaded={};this.genericDependencies=[];if(f){if(!f.name){var v="Tag-"+c++;this.config.name=v}this.addState("INITIAL");for(var A in f)this.config[A]=
f[A];if(f.genericDependencies)this.genericDependencies=this.genericDependencies.concat(f.genericDependencies);if(f.dependencies)this.dependencies=f.dependencies.concat(this.dependencies);if(f.PACKAGE)this._package=f.PACKAGE;this.onInit()}}function w(){if(this.cancelled){this._handleCancel();return}this.waitForDependenciesFinished=(new Date).valueOf();var f=this._fullBodyNeededAndUnLoaded();var v=this._bodyNeededButNotAvailable();if(f||v)this.waitForDependenciesFinished=false;else{if(!this.timeoutCountdownStart)this.timeoutCountdownStart=
(new Date).valueOf();if(this.allDependenciesLoaded())this._markLoadedSuccesfuly();else if(this._loadingOutOfTimeFrames()){this.loadingTimedOut=(new Date).valueOf();if(this.allDependenciesLoaded(true))this._markLoadedSuccesfuly();else{this.addState("TIMED_OUT");this._markLoadingDependenciesFailed();this._triggerOnLoadTimeout()}}else this.waitForDependenciesFinished=false}if(!this.waitForDependenciesFinished)this._setTimeout(w.bind(this),65);else this.addState("LOADED_DEPENDENCIES")}var p=B.opentag.Utils;
var x=B.opentag.TagsUtils;var e=B.opentag.Timed;var m=B.opentag.TagHelper;var c=0;var r=B.opentag.Log;B.Define.clazz("qubit.opentag.GenericLoader",a);var t="after";var u="before";var z="restart";a.prototype.EVENT_TYPES={AFTER_EVENT:t,BEFORE_EVENT:u,RESTART_EVENT:z};a.prototype.onInit=N;a.prototype.LOADING_TIMEOUT=5*1E3;a.prototype.getHtml=function(){if(this.config.html)return this.config.html;if(this.htmlContent)return p.trim(this.htmlContent);return null};a.prototype._executeScript=function(){var f=
false;try{this.script();f=true}catch(v){this.addState("EXECUTED_WITH_ERRORS");this.executedWithErrors=(new Date).valueOf();this._onError(v)}finally{this._onExecute(f)}};a.prototype.getTimeout=function(){return this._getTimeout()};a.prototype._getTimeout=function(f){var v=+this.config.timeout;var A=this.dependencies;if(v!==-1&&A.length>0){var C=0;f=f||[];var k=p.indexInArray(f,this)!==-1;if(!k){f[f.length]=this;for(var l=0;l<A.length;l++){var q=A[l]._getTimeout(f);if(q>C)C=q}if(C>0)v+=C}else return 0}return v};
a.prototype._onExecute=function(f){this.onExecute(f)};a.prototype.onExecute=N;a.prototype._flushDocWrites=function(f){var v=true;this._docWriteNotFlushed=false;try{var A=x.getHTMLLocationForTag(this);if(A&&this._securedWrites&&this._securedWrites.length>0){var C=this.config.locationPlaceHolder==="END";v=x.flushDocWritesArray(this._securedWrites,A,C,this.log,f);if(v)this._docWriteFlushed=(new Date).valueOf();else this._docWriteNotFlushed=(new Date).valueOf()}}catch(k){this._onError(k)}if(f)f();if(this._securedWrites&&
this._securedWrites.length>0){v=false;this._docWriteNotFlushed=(new Date).valueOf()}return v};a.prototype.log=N;a.prototype.finished=function(){return!!this.runIsFinished};a.prototype.script=function(){};a.prototype.before=function(){this.beforeRun=(new Date).valueOf();try{this.events.call(u,this)}catch(f){this._onError(f)}};a.prototype.onBefore=function(f){this.events.on(u,f)};a.prototype.after=function(f){this.afterRun=(new Date).valueOf();try{this.events.call(t,{success:f,tag:this})}catch(v){this._onError(v)}};
a.prototype.onAfter=function(f){this.events.on(t,f)};a.prototype.runOnce=function(){if(!this._runOnceTriggered&&!this.scriptExecuted){this._runOnceTriggered=(new Date).valueOf();this.run()}};a.CANCEL_ALL=false;a.prototype.run=function(){if(!isNaN(this.config.runningLimit))if(this.config.runningLimit<=this.runCounter)return false;if(this.cancelled||a.CANCEL_ALL){this._handleCancel();return false}if(this.isRunning)return false;if(this.lastRun)this.reset();this.lastRun=this.isRunning=(new Date).valueOf();
this.runCounter++;this._ignoreDeps=!!this.ignoreDependencies;if(!this._ignoreDeps&&!this.dependenciesLoaded()){this._attachDepsEventsToContinue();return false}return this._triggerLoadingAndExecution()};a.prototype._triggerLoadingAndExecution=function(){this.awaitingDependencies=-(new Date).valueOf();this.load();if(this._ignoreDeps)this.execute();else this.waitForDependenciesAndExecute();return true};a.prototype._attachDepsEventsToContinue=function(){this.awaitingDependencies=(new Date).valueOf();
var f=this.dependencies;for(var v=0;v<f.length;v++)try{f[v].events.on("success",this._depLoadedHandler)}catch(A){}};a.prototype.dependenciesLoaded=function(){var f=this.dependencies;for(var v=0;v<f.length;v++)if(f[v]!==this){var A=+f[v].scriptExecuted>0;if(!A)return false}return true};a.prototype._setTimeout=function(f,v){this._wasTimed=(new Date).valueOf();var A=this.runtimeId;var C=function(){if(this.runtimeId===A)return f()}.bind(this);return e.setTimeout(C,v)};a.prototype._handleCancel=function(){this.addState("CANCELLED");
try{this.onCancel()}catch(f){this._onError(f)}};a.prototype.waitForDependenciesAndExecute=function(){if(this.loadedDependencies)this.execute();else if(this.loadingDependenciesFailed){this._markFailure();this._markFinished()}else this._setTimeout(this.waitForDependenciesAndExecute.bind(this),30)};a.prototype.execute=function(){this._triggerExecution()};a.prototype._triggerExecution=function(){if(this.cancelled){this._handleCancel();return}if(this.scriptExecuted)return;var f=true;if(this.shouldWaitForDocWriteProtection())f=
false;else{if(!this._beforeEntered){this._beforeEntered=(new Date).valueOf();var v=false;try{v=this.before()}catch(C){this._onError(C)}if(v){this._markFailure();this._markFinished();return}}f=this.loadExecutionURLsAndHTML(this._triggerExecution.bind(this))}if(this.scriptExecuted)return;if(this.unexpectedFail)f=true;if(!f)this._setTimeout(this._triggerExecution.bind(this),30);else{this._flushDocWrites();if(this.scriptLoadingFailed||this.injectHTMLFailed||this.unexpectedFail)this._markFailure();else{this.scriptExecuted=
(new Date).valueOf();this.addState("EXECUTED");this._executeScript()}if(this.cancelled){this._handleCancel();return false}else{var A=this.scriptExecuted>0;try{if(!this.afterRun){this.afterRun=(new Date).valueOf();this.after(A)}}catch(C){this.executedWithErrors=(new Date).valueOf()}if(!this.executedWithErrors)if(A)this.events.call("success")}this._flushDocWrites();this._markFinished()}};a.prototype._markFailure=function(){this.scriptExecuted=-(new Date).valueOf();this.addState("FAILED_TO_EXECUTE")};
a.prototype._markFinished=function(){this.runIsFinished=(new Date).valueOf();this.isRunning=false;if(a.LOCK_DOC_WRITE===this){this._flushDocWrites();x.unlockDocumentWrites();a.LOCK_DOC_WRITE=false}this.onFinished(true)};a.prototype.onFinished=N;a.prototype.onCancel=N;a.prototype.onFinished=N;a.prototype.shouldWaitForDocWriteProtection=function(){if(this.willSecureDocumentWrite())if(!a.LOCK_DOC_WRITE){a.LOCK_DOC_WRITE=this;this._secureWriteAndCollectForExecution()}else if(a.LOCK_DOC_WRITE!==this){if(!this._lockedDocWriteInformed)this._lockedDocWriteInformed=
(new Date).valueOf();return true}return false};a.prototype.runWithoutDependencies=function(){this.ignoreDependencies=true;this.run()};a.prototype.loadExecutionURLsAndHTML=function(f){if(this.cancelled){this._handleCancel();return true}if(!this._loadExecutionURLsAndHTMLInformed)this._loadExecutionURLsAndHTMLInformed=true;this._triggerURLsLoading(f);if(!this.loadURLsNotFinished){this._flushDocWrites();this._triggerHTMLInjection();this._flushDocWrites();if(!this.injectHTMLNotFinished){this._flushDocWrites();
if(!this._docWriteNotFlushed){if(this._docWriteFlushed);return true}}}return false};a.prototype._triggerURLsLoading=function(f){if(!this._urlLoadTriggered&&this.config.url){this._urlLoadTriggered=true;this.loadURLs(false,f)}};a.prototype._triggerHTMLInjection=function(){if(!this._injectHTMLTriggered&&this.getHtml()){this._injectHTMLTriggered=true;this.injectHTML()}};a.prototype.STATE={INITIAL:0,STARTED:1,LOADING_DEPENDENCIES:2,LOADED_DEPENDENCIES:4,LOADING_URL:8,LOADED_URL:16,EXECUTED:32,EXECUTED_WITH_ERRORS:64,
FAILED_TO_LOAD_DEPENDENCIES:128,FAILED_TO_LOAD_URL:256,FAILED_TO_EXECUTE:512,TIMED_OUT:1024,UNEXPECTED_FAIL:2048,CANCELLED:2048*2};a.prototype.addState=function(f){if(this.STATE.hasOwnProperty(f)){this.state=this.state|this.STATE[f];try{this.onStateChange(f)}catch(v){this._onError(v)}}};a.prototype.onStateChange=N;a.prototype.cancel=function(){this.cancelled=(new Date).valueOf()};a.prototype.unCancel=function(){this.cancelled=false};a.prototype.state=a.prototype.STATE.INITIAL;a.prototype._markLoadedSuccesfuly=
function(){this.loadedDependencies=(new Date).valueOf();this.onAllDependenciesLoaded()};a.prototype._secureWriteAndCollectForExecution=function(){if(!this._securedWrites){this._securedWrites=[];x.redirectDocumentWritesToArray(this._securedWrites,this.log)}};a.prototype._markLoadingDependenciesFailed=function(){this.addState("FAILED_TO_LOAD_DEPENDENCIES");this.loadingDependenciesFailed=(new Date).valueOf()};a.prototype.allDependenciesLoaded=function(f,v){return this.getDependenciesToBeLoaded(f,v).length===
0};a.prototype.getDependenciesToBeLoaded=function(f,v){var A=v||[];if(!this.injectionLocationReady())A.push("injection location");var C;var k=this.dependencies;for(C=0;C<k.length;C++)if(k[C]!==this){var l=+k[C].scriptExecuted>0;if(!l){var q=k[C].config?k[C].config.name:"anonymous";A.push("dependant Tag with name -\x3e "+q)}}for(C=0;C<this.genericDependencies.length;C++){var d=this.genericDependencies[C](this);if(!d)A.push("this.genericDependencies["+C+"] (index: "+C+")")}if(A!=="");return A};a.prototype.docWriteAsksToWaitForBody=
function(){return!!(this.delayDocWrite&&this.config.usesDocumentWrite)};a.prototype._bodyNeededButNotAvailable=function(){if(this._dontWaitForInjections())return false;return this._isBodyLocationNeeded()&&!x.bodyAvailable()};a.prototype._isBodyLocationNeeded=function(){if(!this.isLoadingAsynchronously())return false;if(this._isBodyLocationSet())return true;else{var f=this.config.locationObject==="HEAD";return f&&this.config.locationPlaceHolder==="END"}};a.prototype._isBodyLocationSet=function(){var f=
this.config.locationObject;return!f||f==="BODY"};a.prototype._fullBodyNeededAndUnLoaded=function(){if(this._dontWaitForInjections())return false;var f=false;if(this._isBodyLocationNeeded())f=this.config.locationPlaceHolder==="END";f=f||(this.fullbodyNeeded||this.docWriteAsksToWaitForBody());return f&&!p.bodyReady()};a.prototype._dontWaitForInjections=function(){return this.config.dontWaitForInjectionLocation||this.dontWaitForInjectionLocation||a.dontWaitForInjectionLocation};a.prototype.injectionLocationReady=
function(){if(this._dontWaitForInjections())return true;if(this._fullBodyNeededAndUnLoaded())return false;if(!this.isLoadingAsynchronously())return true;return!!x.getHTMLLocationForTag(this)};a.prototype._loadingOutOfTimeFrames=function(){if(this.getTimeout()<0)return false;return(new Date).valueOf()-this.timeoutCountdownStart>this.getTimeout()};a.prototype.loadDependencies=function(){this._loadDependencies()};a.prototype.addClientDependenciesList=function(f,v){return this.addDependenciesList(f,B.Define.clientSpaceClasspath())};
a.prototype.addDependenciesList=function(f,v){if(!f||f.length===0)return;if(!this.failedDependenciesToParse)this.failedDependenciesToParse=[];var A=this.dependencies;for(var C=0;C<f.length;C++){var k=f[C];var l=false;if(k instanceof a)A.push(k);else if(typeof k==="string"){var q=k;if(v)k=v+"."+k;var d=p.getObjectUsingPath(k);if(d)if(d instanceof a)A.push(d);else l=true;else this.failedDependenciesToParse.push(q)}else l=true;if(l){this.badDepsObjects=this.badDepsObjects||[];p.addToArrayIfNotExist(this.badDepsObjects,
k)}}};a.prototype._loadDependencies=function(f){f=f||[];var v=this.dependencies;var A=p.indexInArray(f,this)!==-1;if(!A){f[f.length]=this;for(var C=0;C<v.length;C++)v[C].load(f)}};a.prototype.onError=N;a.prototype._onError=function(f){try{this.onError(f)}catch(v){}};a.prototype._triggerOnLoadTimeout=function(){this.onLoadTimeout()};a.prototype.onLoadTimeout=N;a.prototype.onScriptsLoadSuccess=N;a.prototype.onScriptLoadError=N;a.prototype.onAllDependenciesLoaded=N;a.prototype.onBeforeLoad=null;a.prototype.load=
function(){if(this.loadStarted)return;else{this.loadStarted=(new Date).valueOf();try{if(this.onBeforeLoad)this.onBeforeLoad()}catch(f){this._onError(f)}}this.addState("LOADING_DEPENDENCIES");try{if(!this._ignoreDeps&&this.config.loadDependenciesOnLoad)this.loadDependencies()}catch(f){throw f;}w.call(this)};a.prototype._singleUrlLoadHandler=function(f,v,A){++this.urlsLoaded;if(!f)++this.urlsFailed;if(this.urlsLoaded===v.length){this.loadURLsNotFinished=false;if(f&&this.urlsFailed===0){this.addState("LOADED_URL");
this.urlsLoaded=(new Date).valueOf();try{if(A)A(true)}catch(k){this._onError(k)}finally{this.onScriptsLoadSuccess()}}else{var C="error loading urls. Failed "+this.urlsFailed;this._onError(C);this.addState("FAILED_TO_LOAD_URL");this.urlsLoaded=-(new Date).valueOf();try{this.scriptLoadingFailed=true;if(A)A(false)}catch(k){this._onError(k)}finally{this.onScriptLoadError(C)}}}};a.prototype.loadURLs=function(f,v){var A=f||this.config.url;this.addState("LOADING_URL");try{if(A&&!(A instanceof Array))A=[A];
for(var C=0;C<A.length;C++){this.loadURLsNotFinished=true;var k=A[C];k=this.prepareURL(k);this.loadURL(k,function(l){this._singleUrlLoadHandler(l,A,v)}.bind(this))}}catch(l){this.loadURLsNotFinished=false;this.addState("UNEXPECTED_FAIL");this.unexpectedFail=(new Date).valueOf();this._onError(l)}};a.prototype.prepareLocationObject=function(f){return f};a.prototype.prepareURL=function(f){return f};a.prototype.prepareHTML=function(f){return f};a.prototype.loadURL=function(f,v,A){var C=f;this.addState("LOADING_URL");
x.loadScript({onsuccess:function(){try{if(v)v(true)}catch(k){}}.bind(this),onerror:function(){try{if(v)v(false)}catch(k){}}.bind(this),url:C,node:A||this.config.urlLocation,async:this.isLoadingAsynchronously(),noMultipleLoad:this.config.noMultipleLoad})};a.prototype.onRestart=function(f){this.events.on(z,f)};a.prototype.prepareForRestart=function(){if(this.config.restartable){var f=this.restartCounter+1;this.events.call(z,this);this.reset();this.restartCounter=f}};a.prototype.restart=function(){if(this.config.restartable){this.prepareForRestart();
this.run()}};a.prototype.reset=function(){var f;this._injectHTMLTriggered=f;this._loadExecutionURLsAndHTMLInformed=f;this._lockedDocWriteInformed=f;this._runOnceTriggered=f;this._urlLoadTriggered=f;this.afterRun=f;this.beforeRun=f;this.filtersRunTriggered=f;this.injectHTMLFailed=f;this.loadStarted=f;this.loadURLsNotFinished=f;this.loadedDependencies=f;this.loadingDependenciesFailed=f;this.loadingTimedOut=f;this.runIsFinished=f;this.scriptExecuted=f;this.scriptLoadingFailed=f;this.delayDocWrite=f;
this._securedWrites=f;this.state=0;this.unexpectedFail=f;this.urlsFailed=0;this.urlsLoaded=0;this.waitForDependenciesFinished=f;this.isRunning=f;this.lastRun=f;this.cancelled=f;this._beforeEntered=f;this.awaitingDependencies=f;this.timeoutCountdownStart=f;this.restartCounter=0;this.runtimeId=p.UUID();this.addState("INITIAL")};a.prototype.isLoadingAsynchronously=function(){if(this._wasTimed)return true;return!!(this.config.async||this.forceAsynchronous)};a.prototype.willSecureDocumentWrite=function(){return this.config.usesDocumentWrite&&
this.isLoadingAsynchronously()};a.prototype.injectHTML=function(f){var v=!this.docWriteAsksToWaitForBody();var A=this.prepareHTML(this.getHtml());if(A)m.injectHTMLForLoader(this,f,v,A)};a.prototype.clone=function(){var f=new a(this.config);return f}})();(function(){function a(d){var b={filterTimeout:d&&d.filterTimeout||this.FILTER_WAIT_TIMEOUT,PACKAGE:d&&d.PACKAGE,dedupe:false,needsConsent:false,inactive:false,variables:null,runner:null,disabled:false,locked:false,reRunOnVariableChange:false};p.setIfUnset(d,
b);a.SUPER.apply(this,arguments);this.namedVariables={};this._runtimeMarkers={};this.parameters=[];this.filters=[];this.session=null;this.owningContainer=null;this.pingSent=false;this.oldPingSent=false;this.dedupePingSent=false;this.oldDedupePingSent=false;this.reRunCounter=0;if(d){this.addState("INITIAL");try{a.register(this)}catch(g){}this.setupConfig(d);this.uniqueRefString=null;if(d.init)try{d.init.call(this,d)}catch(g){}this.onTagInit();this.handleVariableChange=this._handleVariableChange.bind(this)}}
function w(d,b){var g=d.namedVariables;var n=r.initPageVariable(g[b]);g[b]=n;return n}var p=B.opentag.Utils;var x=B.opentag.TagsUtils;var e=B.opentag.Timed;var m=B.opentag.filter.BaseFilter;var c=B.opentag.GenericLoader;var r=B.opentag.TagHelper;var t=B.opentag.pagevariable.BaseVariable;var u=B.Cookie;var z=B.Define;z.clazz("qubit.opentag.BaseTag",a,c);a.prototype.setupConfig=function(d){if(!d)return;if(d.filters)this.addFilters(d.filters);if(d.parameters)this.addParameters(d.parameters);if(d.variables)for(var b in d.variables)if(d.variables.hasOwnProperty(b)){var g=
this.getParameterByTokenName(b);if(g){var n=d.variables[b];g.variable=n;if(n.defaultValue!==undefined)g.defaultValue=n.defaultValue;if(n.uv!==undefined)g.uv=n.uv}}if(d.locked)this.lock()};a.prototype.valueForToken=function(d,b){var g=this.getParameterByTokenName(d);if(g){if(b===undefined)if(this.loadingTimedOut)b=true;return this.getParameterValue(g,b)}var n=this.namedVariables;if(n&&n[d]){var y=w(this,d);if(y)return y.getRelativeValue(b)}return undefined};a.prototype.addParameters=function(d){this.parameters=
this.parameters.concat(d)};a.prototype.LOADING_TIMEOUT=5*1E3;a.prototype.FILTER_WAIT_TIMEOUT=-1;a.prototype._isVariable=function(d){return d!==null&&d!==undefined};a.prototype.run=function(){if(this.destroyed)throw"Tag is destroyed.";this.resolveAllDynamicData();this.runPostInitialisationSection();var d=this.parameters;if(d)for(var b=0;b<d.length;b++){var g=this.getVariableForParameter(d[b]);if(!this._isVariable(g)){this._markLoadingDependenciesFailed();this._markFinished();return}}if(this.config.runner){var n=
false;try{this.addState("AWAITING_CALLBACK");n=this._runner=(new Date).valueOf();this.config.runner.call(this)}catch(y){}return n}else{this._runner=false;return this.start()}};a.prototype.lock=function(){this.locked=true;this._unlock=null};a.prototype.unlock=function(){this.locked=false;if(this._unlock){this._unlock();this._unlock=false}};a.prototype.start=function(){if(!this.locked)return a.SUPER.prototype.run.call(this);else{this._unlock=function(){return a.SUPER.prototype.run.call(this)}.bind(this);
return false}};a.prototype.startOnce=function(){if(!this.locked)return a.SUPER.prototype.runOnce.call(this);else{this._unlock=function(){return a.SUPER.prototype.runOnce.call(this)}.bind(this);return false}};a.prototype.getFilters=function(){return this.filters};a.prototype.runOnceIfFiltersPass=function(){if(!this._runOnceIfFiltersPassTriggered&&!this.scriptExecuted){this._runOnceIfFiltersPassTriggered=(new Date).valueOf();this.runIfFiltersPass()}};a.prototype.runIfFiltersPass=function(){if(this.destroyed)throw"Tag is destroyed.";
this.resolveAllDynamicData();this.runPostInitialisationSection();var d=this.filtersState(true);this.addState("FILTER_ACTIVE");if(!this.filtersRunTriggered)this.filtersRunTriggered=(new Date).valueOf();if(d===m.state.SESSION){this.addState("AWAITING_CALLBACK");this.awaitingCallback=(new Date).valueOf()}else if(d===m.state.PASS){this.filtersPassed=(new Date).valueOf();try{this.onFiltersPassed()}catch(g){}this.run()}else if(d===m.state.FAIL){this._markFiltersFailed();this._markFinished()}else if(d>0){var b=
this.config.filterTimeout;if(b<0||(new Date).valueOf()-this.filtersRunTriggered>b){if(!this._awaitingForFilterInformed){this._awaitingForFilterInformed=(new Date).valueOf();try{this.onFiltersDelayed()}catch(g){}}this._setTimeout(this.runIfFiltersPass.bind(this),d)}else{this._markFiltersFailed();this._markFinished();this.filtersRunTimedOut=(new Date).valueOf()}}try{this.onFiltersCheck(d)}catch(g){}return d};a.prototype._markFiltersFailed=function(){this.addState("FILTERS_FAILED");this.filtersPassed=
-(new Date).valueOf()};a.prototype.STATE={INITIAL:0,FILTER_ACTIVE:1,AWAITING_CALLBACK:2,FILTERS_FAILED:4,STARTED:8,LOADING_DEPENDENCIES:16,LOADED_DEPENDENCIES:32,LOADING_URL:64,LOADED_URL:128,EXECUTED:256,EXECUTED_WITH_ERRORS:512,FAILED_TO_LOAD_DEPENDENCIES:1024,FAILED_TO_LOAD_URL:2048,FAILED_TO_EXECUTE:4096,TIMED_OUT:4096*2,UNEXPECTED_FAIL:4096*2*2,CANCELLED:4096*2*2*2};a.prototype.addState=function(d){a.SUPER.prototype.addState.call(this,d);try{a.onStateChange(this)}catch(y){}this.stateStack=[];
var b=this.STATE;var g=this.state;var n=this.stateStack;if(g&b.INITIAL)n.push("Initial state.");if(g&b.FILTER_ACTIVE)n.push("Tag running with filters pass triggered.");if(g&b.FILTERS_FAILED)n.push("Filters failed to pass.");if(g&b.AWAITING_CALLBACK)n.push("Awaiting callback to run this tag. Not pooling.");if(g&b.STARTED)n.push("Tag is initialised and loading has been started.");if(g&b.LOADING_DEPENDENCIES)n.push("Dependencies are being loaded.");if(g&b.LOADED_DEPENDENCIES)n.push("Dependencies loading process has been finished.");
if(g&b.LOADING_URL)n.push("External URL is being loaded.");if(g&b.LOADED_URL)n.push("External URL has been loaded.");if(g&b.EXECUTED)n.push("Main script has been executed.");if(g&b.EXECUTED_WITH_ERRORS)n.push("Main script has been executed but errors occured.");if(g&b.FAILED_TO_LOAD_DEPENDENCIES)n.push("Dependencies has failed to load.");if(g&b.FAILED_TO_LOAD_URL)n.push("URL location failed to load.");if(g&b.FAILED_TO_EXECUTE)n.push("Script failed to execute.");if(g&b.TIMED_OUT)n.push("Script timed out awaiting for dependencies.");
if(g&b.UNEXPECTED_FAIL)n.push("Script occured UNEXPECTED exception and is failed.");if(g&b.CANCELLED)n.push("Tag has been cancelled.")};a.prototype.onTagInit=N;a.prototype.postInitialisationSection=N;a.onStateChange=N;a.prototype.onFiltersDelayed=N;a.prototype.onFiltersPassed=N;a.prototype.onFiltersCheck=N;a.prototype.state=a.prototype.STATE.INITIAL;a.prototype.arePageVariablesLoaded=function(d){return r.allParameterVariablesReadyForTag(this,d)};a.prototype.getDependenciesToBeLoaded=function(d,b){var g=
b||[];if(!this.arePageVariablesLoaded(d))g.push("page variables");return a.SUPER.prototype.getDependenciesToBeLoaded.call(this,d,g)};a.prototype.resolveAllDynamicData=function(){this.resolvePageVariables();this.resolveDependencies();this.resolveFilters()};a.prototype.resolveDependencies=function(){var d=this.failedDependenciesToParse;if(d){this.failedDependenciesToParse=null;this.addDependenciesList(d,z.clientSpaceClasspath())}return this.dependencies};a.prototype.addClientVariablesMap=function(d){this.unresolvedClientVariablesMap=
this._addVariablesMap(d,z.clientSpaceClasspath());return this.unresolvedClientVariablesMap};a.prototype.resolvePageVariables=function(){var d=this.unresolvedClientVariablesMap;if(d){this.unresolvedClientVariablesMap=null;this.addClientVariablesMap(d)}d=this.unresolvedVariablesMap;if(d){this.unresolvedVariablesMap=null;this.addVariablesMap(d)}return this.getPageVariables()};a.prototype.addVariablesMap=function(d){this.unresolvedVariablesMap=this._addVariablesMap(d);return this.unresolvedVariablesMap};
a.prototype._addVariablesMap=function(d,b){if(!d)return;var g={};var n=this.namedVariables;for(var y in d)if(d.hasOwnProperty(y)){var D=d[y];if(D instanceof t)n[y]=D;else if(typeof D==="string"){var E=D;if(b)D=b+"."+D;var G=p.getObjectUsingPath(D);if(G)if(G instanceof t)n[y]=G;else n[y]=D;else g[y]=E}else;}return g};a.prototype.prepareURL=function(d){return this.replaceTokensWithValues(d)};a.prototype.prepareLocationObject=function(d){return this.replaceTokensWithValues(d)};a.prototype.prepareHTML=
function(d){if(d)d=this.replaceTokensWithValues(d);return d};a.prototype._executeScript=function(){if(this.config&&this.config.script)if(typeof this.config.script==="function")this.script=this.config.script;else{var d=this.replaceTokensWithValues(String(this.config.script));this.script=p.expressionToFunction(d).bind(this)}a.SUPER.prototype._executeScript.call(this)};a.prototype.replaceTokensWithValues=function(d){if(!d||d.indexOf("${")===-1)return d;var b=this.parameters;if(b)for(var g=0;g<b.length;g++){var n=
b[g];var y=this.getVariableForParameter(n);if(y){var D=b[g].token;var E=this.valueForToken(D);d=y.replaceToken(D,d,E)}}return d};a.prototype.getParameter=function(d){var b=this.parameters;var g=null;if(b)for(var n=0;n<b.length;n++)if(b[n].name===d)g=b[n];return g};a.prototype.setParameterValueByTokenName=function(d,b){var g=this.getParameterByTokenName(d);if(g!==null){g.variable={value:b};return true}return false};a.prototype.getParameterValue=function(d,b){var g=typeof d==="string"?this.getParameter(d):
d;if(g){var n=this.getVariableForParameter(g);if(n)try{var y;if(b&&g.defaultValue!=="")y=p.gevalAndReturn(g.defaultValue).result;y=n.getRelativeValue(b,y);return y}catch(D){return undefined}}return undefined};a.prototype.filtersState=function(d){var b=d;return x.filtersState(this.filters,this.session,this,b)};a.prototype.addFilter=function(d){p.addToArrayIfNotExist(this.filters,d)};a.prototype.addFilters=function(d){for(var b=0;b<d.length;b++)this.addFilter(d[b])};a.prototype.addClientFiltersList=
function(d){this.unresolvedClientFilterClasspaths=this.addFiltersList(d,z.clientSpaceClasspath());return this.unresolvedClientFilterClasspaths};a.prototype.resolveFilters=function(){var d=this.unresolvedClientFilterClasspaths;if(d){this.unresolvedClientFilterClasspaths=null;this.addClientFiltersList(d)}return this.filters};a.prototype.addFiltersList=function(d,b){var g=[];for(var n=0;n<d.length;n++)try{var y=d[n];var D=y;var E=null;if(typeof y==="string"){E=y;if(b)y=b+"."+y;y=p.getObjectUsingPath(y)}if(typeof y===
"function"){var G=y;y=new G}if(!y);if(!y instanceof m)y=null;if(y)this.addFilter(y);else if(E)p.addToArrayIfNotExist(g,E)}catch(H){this.failedFilters=this.failedFilters||[];this.failedFilters.push(d[n])}return g};a.prototype.reset=function(){a.SUPER.prototype.reset.call(this);var d;this.filtersPassed=d;this.dedupePingSent=false;this.oldDedupePingSent=false;this.pingSent=false;this.oldPingSent=false;this._runOnceIfFiltersPassTriggered=d;this.filtersRunTriggered=d;this._runner=d;this.reRunCounter=0;
this.detachVariablesChangedListeners()};a.prototype.resetFilters=function(){for(var d=0;d<this.filters.length;d++)this.filters[d].reset()};a.prototype.getParameterByTokenName=function(d){var b=null;if(this.parameters){var g=this.parameters;for(var n=0;n<g.length;n++)if(g[n].token===d)b=g[n]}return b};a.prototype.removeFilter=function(d){p.removeFromArray(this.filters,d)};var f=0;var v=[];var A={};var C={};a.register=function(d){var b=p.addToArrayIfNotExist(v,d);if(b===-1)d._tagIndex=v.length-1;else d._tagIndex=
b;if(d.config.id){var g="Q"+d.config.id;C[g]=d;d.uniqueId=g}else C[d.CLASSPATH]=d};a.getById=function(d){return C[String(d)]};a.prototype.getById=a.getById;a.prototype.unregister=function(d){a.unregister(d||this)};a.prototype.destroy=function(){this.destroyed=true;this.cancel();a.unregister(this)};a.unregister=function(d){var b=p.removeFromArray(v,d);d._tagIndex=-1};a.getTags=function(){return v};a.getAccessorsMap=function(){return A};a.prototype.getTags=function(){return v};a.prototype.getPageVariables=
function(){var d=this.parameters;var b=[];if(d)for(var g=0;g<d.length;g++){var n=this.getVariableForParameter(d[g]);if(this._isVariable(n))p.addToArrayIfNotExist(b,n)}if(this.namedVariables)for(var y in this.namedVariables)p.addToArrayIfNotExist(b,w(this,y));return b};a.prototype.getAccessorString=function(){if(!this._accessorsMapKey){this._accessorsMapKey="_"+f++;A[this._accessorsMapKey]=this}return"qubit.opentag.BaseTag.getAccessorsMap()."+this._accessorsMapKey};a.prototype.getVariableForParameter=
function(d){var b;var g=this.namedVariables;if(g&&g[d.token])b=w(this,d.token);if(!b)b=r.validateAndGetVariableForParameter(d);return b};a.prototype.printVariablesState=function(){var d=[];var b=r.getAllVariablesWithParameters(this);for(var g=0;g<b.length;g++){var n=b[g].parameter;var y=b[g].variable;var D;if(n&&n.token)D=this.valueForToken(n.token);else D=y.getRelativeValue(true);var E={name:y.config.name,exists:y.exists(),token:n?n.token:null,value:D,variable:y};d.push(E)}return d};a.prototype._triggerOnLoadTimeout=
function(){this.onLoadTimeout()};a.prototype.getId=function(){return this._getUniqueId()};a.prototype._getUniqueId=function(){if(this.config.id)return this.config.id;if(String(this.CLASSPATH).indexOf(z.STANDARD_CS_NS)===0)return this.CLASSPATH.substring(z.STANDARD_CS_NS.length+1);else return this.CLASSPATH+"#"+this.config.name};var k="qubit.tag.forceRunning_";var l="qubit.tag.disableRunning_";var q="qubit.tag.forceAllToRun";a.prototype.cookieSaysToRunEvenIfDisabled=function(){var d=this._getUniqueId();
var b=!!u.getCached(q);if(!b)b=!!u.getCached(k+d);return b};a.prototype.setCookieForcingTagToRun=function(){var d=this._getUniqueId();u.set(k+d,"true");u.resetCache()};a.setCookieForcingTagsToRun=function(){u.set(q,"true");u.resetCache()};a.prototype.setCookieToDisable=function(){var d=this._getUniqueId();u.set(l+d,"true");u.resetCache()};a.prototype.rmCookieToDisable=function(){var d=this._getUniqueId();u.rm(l+d);u.resetCache()};a.prototype.disabledByCookie=function(){var d=this._getUniqueId();return!!u.getCached(l+
d)};a.rmCookieForcingTagsToRun=function(){u.rm(q);u.resetCache()};a.prototype.rmCookieForcingTagToRun=function(){var d=this._getUniqueId();u.rm(k+d);u.resetCache()};a.rmAllDisablingCookies=function(){p.rmCookiesMatching(l);u.resetCache()};a.rmAllCookiesForcingTagToRun=function(){p.rmCookiesMatching(k);a.rmCookieForcingTagsToRun()};a.prototype.onVariableChanged=function(d){this.attachVariablesChangedListeners(true);this.events.on("variableChanged",d)};a.prototype._handleVariableChange=function(d){this.events.call("variableChanged",
d);if(!this.isRunning&&this.config.reRunOnVariableChange){if(!isNaN(this.config.reRunLimit))if(this.config.reRunLimit<=this.reRunCounter)return;var b=this.reRunCounter+1;this.reset();this.reRunCounter=b;this.resetFilters();this.runIfFiltersPass()}};a.prototype.attachVariablesChangedListeners=function(d){var b=this.getPageVariables();var g=!!(this.config.reRunOnVariableChange||this.config.observeVariables||d);if(g)for(var n=0;n<b.length;n++){var y=b[n];y.onValueChanged(this.handleVariableChange,g)}};
a.prototype.detachVariablesChangedListeners=function(){var d=this.getPageVariables();for(var b=0;b<d.length;b++){var g=d[b];g.deatchOnValueChanged(this.handleVariableChange)}};a.prototype._markFinished=function(){a.SUPER.prototype._markFinished.call(this);this.attachVariablesChangedListeners()};a.prototype.prepareForRestart=function(d){if(this.config.restartable){a.SUPER.prototype.prepareForRestart.call(this,false);if(!d){var b=this.getFilters();for(var g=0;g<b.length;g++)b[g].prepareForRestart()}}};
a.prototype.restart=function(d){if(this.config.restartable){this.prepareForRestart(d);this.runIfFiltersPass()}};a.prototype.runPostInitialisationSection=function(){if(!this._postInitialisationRun){this._postInitialisationRun=true;if(this.postInitialisationSection)try{this.postInitialisationSection()}catch(d){}}}})();(function(){function a(e){p.setIfUnset(e,a.defaultConfig);if(this.singleton){var m=this.PACKAGE_NAME+"."+this.CLASS_NAME;var c=B.opentag.Utils.getObjectUsingPath(m,K);if(c.__instance)return c.__instance;
c.__instance=this}a.SUPER.call(this,e)}function w(e,m){var c=e.toString();c=c.replace(/\s*function\s*\([\w\s,_\d\$]*\)\s*\{/,"");c=c.substring(0,c.lastIndexOf("}"));c=c.replace(/(["']\s*\+\s*)\s*_*\w+\s*\.\s*valueForToken\s*\(\s*'([^']*)'\s*\)/g,'$1"${$2}"');c=c.replace(/\s*_*\w+\s*\.\s*valueForToken\s*\(\s*'([^']*)'\s*\)(\s*\+\s*["'])/g,'"${$1}"$2');c=c.replace(/(["']\s*\+\s*)\s*_*\w+\s*\.\s*valueForToken\s*\(\s*"([^"]*)"\s*\)/g,'$1"${$2}"');c=c.replace(/\s*_*\w+\s*\.\s*valueForToken\s*\(\s*"([^"]*)"\s*\)(\s*\+\s*["'])/g,
'"${$1}"$2');c=c.replace(/(\s*)_*\w+\s*\.\s*valueForToken\s*\(\s*'([^']*)'(\s*)\)/g,"$1${$2}$3");c=c.replace(/(\s*)_*\w+\s*\.\s*valueForToken\s*\(\s*"([^"]*)"(\s*)\)/g,"$1${$2}$3");c=m.replaceTokensWithValues(c);p.geval(c)}var p=B.opentag.Utils;var x=B.Define;B.Define.clazz("qubit.opentag.LibraryTag",a,B.opentag.BaseTag);a.defaultConfig={vendor:null,imageUrl:null,description:"",async:false,isPrivate:false,upgradeable:true,html:"",parameters:[],prePostWindowScope:false};a.prototype.pre=function(){};
a.prototype.post=function(){};a.prototype.before=function(){a.SUPER.prototype.before.call(this);try{var e=this.config;if(e&&e.pre)if(typeof e.pre==="function")this.pre=e.pre;else{var m=this.replaceTokensWithValues(String(e.pre));this.pre=p.expressionToFunction(m).bind(this)}if(this.config.prePostWindowScope&&this.pre!==a.prototype.pre&&this.pre.toString)w(this.pre,this);else this.pre()}catch(c){return true}return false};a.prototype.after=function(e){a.SUPER.prototype.after.call(this,e);try{var m=
this.config;if(m&&m.post)if(typeof m.post==="function")this.post=m.post;else{var c=this.replaceTokensWithValues(String(m.post));this.post=p.expressionToFunction(c).bind(this)}if(this.config.prePostWindowScope&&this.post!==a.prototype.post&&this.post.toString)w(this.post,this);else this.post(e)}catch(r){}};a.define=function(e,m){e=e.replace(/^[\.]+/g,"").replace(/[\.]+$/g,"").replace(/\.+/g,".");e=B.Define.vendorsSpaceClasspath(e);var c={};if(m.getDefaultConfig)c=m.getDefaultConfig();var r=m.CONSTRUCTOR;
var t={};for(var u in m)if(u!=="config")t[u]=m[u];var z=function(A){A=A||{};A=p.overrideFromLeftToRight(c,A);var C=B.opentag.LibraryTag.call(this,A);if(r)r.call(this,A);if(C)return C};var f=B.opentag.Utils.defineWrappedClass(e,a,t,M,z);var v=x.STANDARD_VS_NS+".";if(e.indexOf(v)!==0)p.namespace(v+e,f);return f};a.getLibraryByClasspath=function(e){return p.getObjectUsingPath(e,B.Define.getVendorSpace())}})();(function(){function a(p){var x={url:null,html:"",locationPlaceHolder:"NOT_END",locationObject:"BODY",
async:true};w.setIfUnset(p,x);a.SUPER.call(this,p)}var w=B.opentag.Utils;B.Define.clazz("qubit.opentag.CustomTag",a,B.opentag.LibraryTag)})();(function(){var a=B.opentag.Utils;var w=B.opentag.filter.BaseFilter;var p=function(){};B.Define.clazz("qubit.opentag.Tags",p);p.getById=function(e){return B.opentag.BaseTag.getById(String(e))};p.getAllTagsByState=function(){return B.opentag.Container.getAllTagsByState(p.getTags())};p.findTagByName=function(e){var m=this.getTags();var c=[];for(var r=0;r<m.length;r++)if(m[r].config.name===
e)c.push(m[r]);return c};p.findTagByMatch=function(e){var m=this.getTags();var c=[];for(var r=0;r<m.length;r++)if(m[r].config.name.match(e))c.push(m[r]);return c};p.findTagContainers=function(e){var m=p.getContainers();var c=[];for(var r=0;r<m.length;r++){var t=m[r].tags;for(var u in t)if(t[u]===e){c.push(m[r]);break}}return c};p.getTags=function(){return B.opentag.BaseTag.getTags()};p.resetAllTags=function(e){var m=p.getTags();for(var c=0;c<m.length;c++){m[c].reset();if(!e)m[c].resetFilters()}};
p.getContainersPageVariables=function(){var e=p.getContainers();var m=[];for(var c=0;c<e.length;c++)m=m.concat(e.getPageVariables());return m};p.getAllPageVariables=function(){var e=p.getTags();var m=[];for(var c=0;c<e.length;c++)m=m.concat(e[c].getPageVariables());return m};p.cancelAll=function(){var e=p.getTags();for(var m=0;m<e.length;m++)e[m].cancel()};p.resetAll=function(e){var m=p.getTags();for(var c=0;c<m.length;c++){m[c].reset();if(!e)m[c].resetFilters()}};p.getPageVariableByName=function(e){var m=
p.getAllPageVariables();var c=[];for(var r=0;r<m.length;r++)if(m[r].config.name===e)c.push(m[r]);return c};p.getLoadTime=function(e){var m=e.beforeRun;var c=e.runIsFinished;if(isNaN(c))return{tag:e,loadTime:null};else return{tag:e,loadTime:c-m}};p.getLoadTimes=function(e){var m=[];if(e instanceof B.opentag.BaseTag){m.push([p.getLoadTime(e[t])]);return m}e=e||p.getTags();var c=e instanceof Array;if(c)for(var r=0;r<e.length;r++){if(e[r]instanceof B.opentag.BaseTag)m.push(p.getLoadTime(e[r]))}else for(var t in e)if(e[t]instanceof
B.opentag.BaseTag)m.push(p.getLoadTime(e[t]));return m};p.forceAllContainersAndTagsToRunIfDisabled=function(){B.opentag.Container.setCookieForDisabledContainersToRun();B.opentag.BaseTag.setCookieForcingTagsToRun()};p.rmAllContainersAndTagsForcingFlags=function(){B.opentag.Container.rmCookieForDisabledContainersToRun();B.opentag.BaseTag.rmAllCookiesForcingTagToRun()};p.getContainers=function(){return B.opentag.Container.getContainers()};p.findAllTagsByClassPath=function(e){var m=(new Date).valueOf();
var c=[];var r=[];try{r.push(B.opentag.CustomTag);r.push(B.opentag.LibraryTag)}catch(f){}var t=p.getTags();for(var u=0;u<t.length;u++){var z=t[u];if(a.indexInArray(r,z)<0&&z.PACKAGE_NAME.indexOf(e)===0)c.push(z)}return c};p.findAllTags=function(e,m){var c=B.opentag.BaseTag;var r;var t=[];var u=(new Date).valueOf();try{t.push(B.opentag.CustomTag);t.push(B.opentag.LibraryTag)}catch(z){}r=p.findAllInstances(e,c,t,m);return r};var x=function(e,m,c,r){var t=[];if(typeof e==="string")e=a.getObjectUsingPath(e);
if(e){var u={objectsOnly:true};if(r)u.maxDeep=true;var z=function(f,v,A,C){if(m(f)){for(var k=0;k<c.length;k++)if(c[k]===f)return true;a.addToArrayIfNotExist(t,f);return true}return false}.bind(this);a.traverse(e,z,u)}return t};p.findAllInstances=function(e,m,c,r){var t=function(u){return u instanceof m};return x(e,t,c,r)};p.findAllInheriting=function(e,m,c,r){var t=function(u){return u.prototype instanceof m};return x(e,t,c,r)};p.findAllFilters=function(e,m){var c=[];try{c.push(B.opentag.filter.Filter);
c.push(B.opentag.filter.URLFilter)}catch(r){}return p.findAllInheriting(e,w,c,m)}})();I.cookie={};I.cookie.PageView={};I.cookie.PageView.update=function(){var a;var w;w=function x(){return Math.floor(1+Math.random()*65536).toString(36).substring(1)};if(!window.__pageViewId__){a=(new Date).getTime().toString(36);window.__pageViewId__=a+w()+w()+w()}return window.__pageViewId__};I.html.PostData=function(a,w,p,x){var e;var m;var c;var r;var t;var u;var z;var f;var v;var A;A=2;v=5E3;z=false;f=function(){if(A>
0)setTimeout(function(){if(!z){A-=1;e()}},v)};m=navigator.userAgent.toLowerCase();c=m.indexOf("msie")!==-1;r=m.indexOf("msie 9")!==-1;t=m.indexOf("msie 7")!==-1||m.indexOf("msie 6")!==-1;u=("https:"===document.location.protocol?"https:":"http:")+a;p=p||"POST";e=function(){var C;try{C=null;try{C=new XMLHttpRequest}catch(k){}if(C&&!c)C.open(p,u,true);else if(typeof XDomainRequest!=="undefined"){C=new XDomainRequest;C.open(p,u)}else C=null;try{C.withCredentials=false}catch(k){}if(C.setRequestHeader)if(x)C.setRequestHeader("Content-Type",
x);else C.setRequestHeader("Content-Type","text/plain;charset\x3dUTF-8");C.onload=function(){z=true};C.onreadystatechange=function(){};C.ontimeout=function(){};C.onerror=function(){};C.onprogress=function(){};C.send(w)}catch(k){try{try{I.html.fileLoader.load(u)}catch(l){if(window.console&&window.console.log)window.console.log(k)}}catch(l){}}};if(t){I.html.fileLoader.load(u);return}else e()};(function(){function a(){}function w(x,e){var m={};m.clientId=""+e.clientId;m.containerId=""+x.getContainerId();
m.classpath=""+x.PACKAGE_NAME;m.opentagStats=true;if(x.sentPing)m.containerLoad=false;else{x.sentPing=(new Date).valueOf();m.containerLoad=true}m.isS3=false;m.pageViewId=I.cookie.PageView.update();m.tags=[];return m}var p="text/plain;charset\x3dUTF-8";B.Define.clazz("qubit.opentag.Ping",a);a.prototype.sendErrors=function(x,e){};a.getPingID=function(x){if(x.config.id)return x.config.id;var e=x.PACKAGE_NAME.lastIndexOf(".");if(e!==-1)return x.PACKAGE_NAME.substring(e+1);else return x.PACKAGE_NAME};
a.prototype.send=function(x,e){var m=x.config;var c=w(x,m);var r=c.tags;var t=m.pingServerUrl;for(var u=0;u<e.length;u++){var z=e[u].tag;var f=e[u].loadTime;if(f===null||isNaN(f))continue;var v={};var A=a.getPingID(z);if(!z.pingSent&&A&&f!==null)if(A!==undefined){v.tagId=A;v.loadTime=f;v.fired=true;r.push(v);z.pingSent=true}else;else if(z.pingSent);else if(f===null);}if(t&&(r.length>0||c.containerLoad)){var C=R.stringify(c);var k="//"+t;I.html.PostData(k,C,"POST",p)}else{if(!r.length);if(!t);}};a.prototype.sendDedupe=
function(x,e){var m=x.config;var c=w(x,m);var r=m.pingServerUrl;var t=c.tags;for(var u=0;u<e.length;u++){var z=e[u];var f=a.getPingID(z);var v={};if(f===undefined);else if(!z.dedupePingSent){v.tagId=""+f;v.fired=false;v.loadTime=0;t.push(v);z.dedupePingSent=true}}if(r&&(t.length>0||c.containerLoad)){var A=R.stringify(c);var C="//"+r;I.html.PostData(C,A,"POST",p)}else{if(!t.length);if(!r);}}})();I.cookie.SimpleSessionCounter={};I.cookie.SimpleSessionCounter._cookieName="_qst_s";I.cookie.SimpleSessionCounter._sessionCookie=
"_qsst_s";I.cookie.SimpleSessionCounter.update=function(a){var w;var p;var x;var e=30;w=B.Cookie.get(I.cookie.SimpleSessionCounter._cookieName);p=B.Cookie.get(I.cookie.SimpleSessionCounter._sessionCookie);if(!w)w=1;else{w=parseInt(w,10);if(!p||parseInt(p,10)<(new Date).getTime()-e*60*1E3)w+=1}B.Cookie.set(I.cookie.SimpleSessionCounter._cookieName,w,365,a);B.Cookie.set(I.cookie.SimpleSessionCounter._sessionCookie,(new Date).getTime().toString(),null,a);return w};(function(){function a(t){if(t)if(t.alphabet){this.alphabet=
t.alphabet;this.dict={};for(var u=0;u<this.alphabet.length;u++)this.dict[this.alphabet[u]]=u}else{this.alphabet=p;this.dict=m}}function w(t,u){for(var z in u)if(t===u[z])return z;return null}var p=[];var x=Math.pow(2,8);for(var e=0;e<x;e++)p.push(String.fromCharCode(e));var m={};for(var c=0;c<p.length;c++)m[p[c]]=c;var r=B.Define;r.clazz("qubit.compression.LZW",a);a.prototype.encode=function(t){var u=this.alphabet.length;var z={};var f=[];var v=0;var A=t.charAt(v++);var C;for(var k=this.dict;!!(C=
t.charAt(v++));){var l=A+C;if(k.hasOwnProperty(l)||z.hasOwnProperty(l))A=l;else{var q=k.hasOwnProperty(A)?k[A]:z[A];if(q===undefined)throw"Dictionary base is to small for those contents: "+A;f.push(q);z[l]=u++;A=C}}if(A!=="")f.push(z.hasOwnProperty(A)?z[A]:k[A]);return f};a.prototype.decode=function(t){var u=this.dict;var z=this.alphabet.length;var f;var v={};var A=w(t[0],u);var C=A;var k=[A];for(var l=1;l<t.length;l++){var q=t[l];f=w(q,u);if(f===null){if(v.hasOwnProperty(q))f=v[q];if(f===null)f=
C+A}k.push(f);A=f.charAt(0);v[z++]=C+A;C=f}return k.join("")}})();(function(){function a(k){var l=0;var q=k<0;if(q)k=-k;var d="";var b=true;do{l=k%v;if(b){d=u[f[l]];b=false}else d=f[l]+d;k=(k-l)/v}while(k>0);if(q)return"-"+d;return d}function w(k){var l=0;var q=0;var d=true;for(var b=0;b<k.length;b++){var g=k.charAt(k.length-1-b);if(d){d=false;g=x.charAt(r[g])}l+=m[g]*Math.pow(v,q++)}return l}function p(k){}var x="abcdefghijklmnopqrstuvwxyz"+"0123456789"+"'%./:\x3c\x3e?[";var e="ABCDEFGHIJKLMNOPQRSTUVWXYZ"+
"*!-+()@{|}"+'"]^_`~$\x26#';var m={};for(var c=0;c<x.length;c++)m[x.charAt(c)]=c;var r={};for(var t=0;t<x.length;t++)r[e.charAt(t)]=t;var u={};for(var z=0;z<x.length;z++)u[x.charAt(z)]=e.charAt(z);var f=x.split("");var v=f.length;var A=new B.compression.LZW({});var C=B.Define;C.clazz("qubit.compression.Compressor",p);p.prototype.compress=function(k,l){var q=(l||A).encode(k);var d=[];for(var b=0;b<q.length;b++)d.push(String.fromCharCode(q[b]));return d.join("")};p.prototype.compressAnsi=function(k,
l){var q=(l||A).encode(k);var d=[];for(var b=0;b<q.length;b++){var g=a(q[b]);d.push(g)}return d.join("")};p.prototype.decompressAnsi=function(k,l){var q=[];var d="";for(var b=0;b<k.length;b++){var g=k.charAt(b);if(r.hasOwnProperty(g)){var n=d+g;d="";n=w(n);q.push(n)}else d+=g}return(l||A).decode(q)};p.prototype.decompress=function(k,l){var q=[];for(var d=0;d<k.length;d++)q.push(k.charCodeAt(d));return(l||A).decode(q)}})();(function(){function a(q){var d=[];for(var b=0;b<q.length;b++){var g=m(q[b][0]);
d.push([new RegExp(g,"g"),"*"+q[b][1]])}return d}function w(q,d){for(var b=0;b<d.length;b++)if(d[b][1]===q)return d[b][0];return null}function p(q){this._regexDefs=f;this._defs=z;if(q)if(q.definitions){this._regexDefs=a(q.definitions);this._defs=q.definitions}}function x(q,d){var b=[];for(var g=0;g<q.length;g++){var n=true;if(d)n=q.charCodeAt(g)<=d;var y=u.cookieAlphabetMap.hasOwnProperty(q.charAt(g));if(n&&!y)b.push("*"+q.charCodeAt(g)+".");else b.push(q.charAt(g))}return b.join("")}function e(q,
d){d=d.replace(/@/g,"@@");var b=[];var g=0;for(var n=0;g<q.length;g++){var y=q[g][0];var D=new RegExp(m(y),"g");var E=d.replace(D,"@"+n+"-");if(E!==d){b.push(q[g][0]);n++;d=E}}return[d,b]}function m(q){return q.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")}function c(q){var d={};var b="";for(var g=0;g<q.length;g++){var n=q.charAt(g);if(!A[n]){if(isNaN(d[b]))d[b]=q.split(b).length-1;b=""}else b+=n}var y=[];for(var D in d)if(d.hasOwnProperty(D)){var E=d[D];if(E>=l&&D.length>=k)y.push([D,E])}y=y.sort(function(G,
H){if(G[0].length===H[0].length)return 0;if(H[0].length>G[0].length)return 1;else return-1});return y}function r(q,d){if(!d||d.length===0||!q)return q;var b="";var g=false;var n=false;var y="";for(var D=0;D<q.length;D++){var E=q.charAt(D);if(E==="@"||g||n)if(g||n){g=false;if(E==="@")b+="@";else if(!isNaN(+("-"+E))){n=true;y=y+E}else if(n){if(d&&E==="-"&&d[+y])b+=d[+y];else b+="@"+y+E;y="";n=false}else b+="@"+E}else g=true;else b+=E}if(y)b+="@"+y;if(g)b+="@";return b}var t=B.Define;var u=B.Cookie;
var z=[['","referrer":[{"url":"http://',"1-"],['","referrer":[{"url":"https://',"2-"],[',"referrer":[{"url":"http://',"3-"],[',"referrer":[{"url":"https://',"4-"],[',"sessionStartTime":',"5-"],["www.google.co.uk","6-"],["www.google.","7-"],['"sessionStartTime":',"8-"],['"landing":"',"9-"],["http%3A%2F%2Fwww","10-"],['"landing":',"L"],['"time":',"A"],['"pageViews":',"P"],['"sessionCount":',"B"],['"referrer":',"R"],['"url":"http://www.',"J"],['"url":"https://www.',"M"],['"url":"',"I"],['"url":',"U"],
["http://www.","W"],["https://www.","V"],["%2Fen%2Ftsuk%2F","K"],['"sessionLandingPage":',"F"],["http%3A%2F%2F","D"],["http://","H"],["https://","X"],['""',"O"],['",',"Y"],['":{}}',"z"],["\x3c","S"],["\x3e","G"],["[","Z"],["]","E"],["{","a"],["}","b"],["(","c"],[")","d"],["!","e"],["#","f"],["$","g"],["!","q"],["'","i"],[":","j"],["?","k"],["^","x"],["`","m"],["|","n"],["~","o"],["%","v"],[",","C"]];var f=a(z);t.clazz("qubit.opentag.compression.Encoder",p);p.prototype.encode=function d(b,g){var n=
b.replace(/\*/g,"**");var y=c(n);for(var D=0;D<this._regexDefs.length;D++){var E=this._regexDefs[D];n=n.replace(E[0],E[1])}n=n.replace(/;/g,"*-");n=n.replace(/&/g,"*.");n=n.replace(/\\/g,"*/");n=n.replace(/=/g,"*+");n=n.replace(/\n/g,"*N");n=n.replace(/ /g,"*_");n=n.replace(/\t/g,"*T");n=n.replace(/"/g,"*Q");var G=c(n);G.concat(y);var H=e(G,n);var J=H[1];var O=J.length>0;if(O)n=H[0];if(!g)n=x(n);else n=x(n,g);if(O)return"Y"+J.join("*")+"@"+n;else return"N"+n};var v="abcdefghijklmnopqrstuvwxyz0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ+_.";
var A={};for(var C=0;C<v.length;C++)A[v.charAt(C)]=true;var k=4;var l=2;p.prototype.decode=function(d){var b=null;if(d.charAt(0)==="N")d=d.substring(1);else if(d.charAt(0)==="Y"){var g=d.indexOf("@");if(g>=0){b=d.substring(1,g);b=b.split("*");d=d.substring(g+1);d=r(d,b)}}var n="";var y=false;var D=false;var E="";for(var G=0;G<d.length;G++){var H=d.charAt(G);if(H==="*"||y||D)if(y||D){y=false;if(!isNaN(+("-"+H))){E=E+H;D=true}else if(D){if(H===".")n+=String.fromCharCode(+E);else if(H==="-"&&w(E+"-",
this._defs))n+=w(E+"-",this._defs);else n+="*"+E+H;E="";D=false}else if(H==="*")n+="*";else if(H==="-")n+=";";else if(H==="/")n+="\\";else if(H===".")n+="\x26";else if(H==="+")n+="\x3d";else if(H==="N")n+="\n";else if(H==="_")n+=" ";else if(H==="T")n+="\t";else if(H==="Q")n+='"';else if(w(H,this._defs)!==null){var J=w(H,this._defs);n+=J}else n+="*"+H}else y=true;else n+=H}if(E)n+="*"+E;if(y)n+="*";return n}})();(function(){function a(e){this.testBinary=false;this.binSupported=x;if(e){this.compressor=
new B.compression.Compressor;this.encoder=new B.opentag.compression.Encoder({})}}var w=B.Define;var p=B.Cookie;var x=false;w.clazz("qubit.opentag.compression.CookieCompressor",a);a.prototype.compress=function(e,m){if(typeof e!=="string"||e==="")return e;var c=this.encoder.encode(e);var r;if(this.binSupported||this.testBinary){var t=this.compressor.compress(c);r='"B'+this.encoder.encode(t,128)+'"';p.set("__qtag_test_bin__",r,undefined,undefined,true);var u=p.get("__qtag_test_bin__",true);p.rm("__qtag_test_bin__");
if(u&&u!==r)r=null}var z;var f=this.encoder.encode(this.compressor.compressAnsi(c));if(!m&&c.length<=f.length)z="E"+c;else z="C"+f;if(r&&r.length<z.length)return r;else return z};a.prototype.decompress=function(e){if(typeof e!=="string"||e==="")return e;if(e.charAt(0)==='"')e=e.substring(1,e.length-1);var m=e.charAt(0);e=e.substring(1);switch(m){case "E":return this.encoder.decode(e);case "C":var c=this.compressor.decompressAnsi(this.encoder.decode(e));return this.encoder.decode(c);case "B":var r=
this.compressor.decompress(this.encoder.decode(e));return this.encoder.decode(r);default:throw"This code is not supported! Code: "+m;}}})();(function(){var a=B.Cookie;var w=B.opentag.Utils;var p=function(){};B.Define.clazz("qubit.opentag.Session",p);var x=new B.opentag.compression.CookieCompressor({});p.readCompressedCookie=function(e){var m=a.get(e,true);return x.decompress(m)};p.setupSession=function(e){var m=e.config;var c;var r;var t;var u;var z;var f;c={};c.sessionCount=I.cookie.SimpleSessionCounter.update(m.cookieDomain);
z="qtag_"+e.getContainerId();var v="x_qtag_"+e.getContainerId();t=a.get(z);var A=!!t;if(t===null){t=a.get(v,true);t=x.decompress(t)}if(t)try{t=R.parse(t)}catch(k){t={sc:0,sessionCount:0,pageViews:0,sessionStartTime:0,referrer:[],sessionLandingPage:"",__v:{}}}else t={sc:0,sessionCount:0,pageViews:0,sessionStartTime:0,referrer:[],sessionLandingPage:"",__v:{}};f=(new Date).getTime();if(c.sessionCount!==parseInt(t.sc,10)){t.sessionStartTime=f;t.sc=c.sessionCount;t.sessionCount+=1;t.referrer.push({url:p.getReferrer(),
landing:w.getUrl().substring(0,300),time:f});t.sessionLandingPage=w.getUrl().substring(0,300)}else if(p.isReferrerDifferent())if(!p.referrerIsSameAsPrevious(t.referrer,f,30*60*1E3)){t.referrer.push({url:p.getReferrer(),landing:w.getUrl().substring(0,300),time:f});t.sessionLandingPage=w.getUrl().substring(0,300);t.sessionStartTime=f;t.sessionCount+=1}c.sessionCount=t.sessionCount;c.sessionStartTime=t.sessionStartTime;c.pageStartTime=f;t.pageViews+=1;c.pageViews=t.pageViews;c.sessionLandingPage=t.sessionLandingPage;
c.referrer=t.referrer;if(c.referrer.length>5)c.referrer.splice(2,c.referrer.length-5);u=R.stringify(t);for(r=0;x.compress(u).length>m.maxCookieLength&&r<5;){if(t.referrer.length>=3)t.referrer.splice(2,1);else if(t.referrer.length===2)t.referrer=[t.referrer[0]];else if(t.referrer.length===1)t.referrer=[];u=R.stringify(t);r+=1}c.referrer=t.referrer;if(A)a.rm(z);var C=x.compress(u);a.rm(v);if(m.maxCookieLength>0)a.set(v,C,365,m.cookieDomain,true);c.setVariable=function(k,l,q){var d=!!q?q:0;t.__v[k]=
[l,d];var b=x.compress(R.stringify(t));if(m.maxCookieLength>0)a.set(v,b,365,m.cookieDomain,true);else a.rm(v)};c.getCookie=function(k,l){var q=a.get(k,true);if(q&&(l||k.indexOf("x_")===0))try{q=x.decompress(q)}catch(d){}else if(q!==null)q=a.decode(q);return q};c.getVariable=function(k){var l;var q;var d;l=t.__v[k];if(l){q=l[1];if(q===0||q>(new Date).getTime())return l[0]}return null};c.on=function(k,l,q){if(l.attachEvent)l.attachEvent("on"+k,q);else if(l.addEventListener)l.addEventListener(k,q,false)};
c.getTagCookie=function(){return p.readCompressedCookie(v)};p.lastSession=c;return c};p.referrerIsSameAsPrevious=function(e,m,c){var r;var t;var u;if(e.length>0){r=p.getReferrer();t=w.getUrl().substring(0,300);u=e[e.length-1];return u.url===r&&u.landing===t&&u.time+c>m}return false};p.isReferrerDifferent=function(){var e;var m;var c;c=p.getReferrer();e=c.indexOf("://");if(e===-1)return true;e+=3;try{if(c.substring(e).indexOf(p.getDomain())!==0)return true;return false}catch(r){return true}};p.getReferrer=
function(){if(document.referrer)return document.referrer.substring(0,300);return"direct"};p.getDomain=function(){return document.location.host}})();(function(){function a(){}var w=B.opentag.LibraryTag;var p=B.Define;a.library=function(){return w.define.apply(w,arguments)};a.libraryRef=function(){return w.getLibraryByClasspath.apply(w.getLibraryByClasspath,arguments)};p.namespace("qubit.Quick",a)})();(function(){function a(k){this.runQueue=[];this.tags=[];this.config={cookieDomain:"",maxCookieLength:1E3,
gzip:true,delayDocWrite:false,clientId:"",name:"",tellLoadTimesProbability:null,pingServerUrl:null,trackSession:null,disabled:false,containerId:"",scanTags:false,noPings:false,restartable:true};this.ignoreTagsState=false;if(k){this.setConfig(k);if(!k.name)this.config.name="Cont-"+z++;a.register(this);if(a.NO_PINGS)this.config.noPings=true;this.ping=new B.opentag.Ping(this.config);this._sendPingsTrigger=this.sendPings.bind(this);if(k.init)try{k.init.call(this,k)}catch(q){}var l=this;this._tagLoadedHandler=
function(q){if(l._containerAlreadySentPings){l.sendPingsNotTooOften();if(q.success);}}}this.events=new B.Events({});return this}function w(k,l,q,d){if(k[q]){d[q]=d[q]+1||1;q+="("+d[q]+")"}k[q]=l}var p=B.opentag.Utils;var x=B.opentag.filter.BaseFilter;var e=B.opentag.filter.Filter;var m=B.opentag.BaseTag;var c=B.opentag.Timed;var r=B.opentag.Tags;var t=B.opentag.Session;var u=B.Cookie;var z=1;try{window.opentag_consentGiven=function(){a.consentIsGiven=true;var k=a.getContainers();for(var l=0;l<k.length;l++)try{k[l].run()}catch(q){}}.bind(this)}catch(k){}B.Define.clazz("qubit.opentag.Container",
a);var f=[];var v="restart";a.prototype.EVENT_TYPES={RESTART_EVENT:v};a.register=function(k){p.addToArrayIfNotExist(f,k)};a.prototype.isTellingLoadTimes=function(){var k=this.config.tellLoadTimesProbability;if(k===null)k=0;return k>Math.random()};a.prototype.destroy=function(k){this.destroyed=true;this.unregister();for(var l=0;l<this.tags.length;l++){var q=this.tags[l];if(q.owningContainer===this){q.owningContainer=null;if(k&&q instanceof m)q.destroy()}}this.tags=[]};a.destroyAll=function(k){var l=
a.getContainers();for(var q=0;q<l.length;q++)l[q].destroy(k)};a.findContainersByName=function(k){var l=a.getContainers();var q=[];for(var d=0;d<l.length;d++)if(l[d].config.name===k)q.push(l[d]);return q};a.getById=function(k){var l=a.getContainers();for(var q=0;q<l.length;q++)if(l[q].getContainerId()===k)return l[q];return null};a.prototype.unregister=function(k){a.unregister(this,k)};a.unregister=function(k,l){p.addToArrayIfNotExist(f,k);var q=p.removeFromArray(f,k);if(l){for(var d=0;d<k.tags.length;d++){var b=
k.tags[d];if(b.owningContainer===k){b.owningContainer=null;if(b instanceof m)b.unregister()}}k.tags=[]}if(!q||q.length===0);};a.prototype.hasConsent=function(){return u.get("qubitconsent")==="Accepted"};a.prototype.register=function(k){a.register(k||this)};a.getContainers=function(){return f};a.prototype.getContainers=function(){return a.getContainers()};a.prototype.onTagRegistered=function(k){};a.prototype.registerTag=function(k){if(k.owningContainer!==null)return false;else{this.tags.push(k);k.owningContainer=
this;k.onAfter(this._tagLoadedHandler);try{this.onTagRegistered(k)}catch(l){}}return true};a.prototype.unregisterTag=function(k){if(k.owningContainer===this)k.owningContainer=null;for(var l=0;l<this.tags.length;)if(this.tags[l]===k)this.tags.splice(l,1);else l++};a.prototype.registerTags=function(k){for(var l=0;l<k.length;l++)this.registerTag(k[l])};a.prototype.setConfig=function(k){for(var l in k)this.config[l]=k[l]};a.prototype.run=function(k){this.runTags({command:"runOnceIfFiltersPass"},k)};a.prototype.runWithoutFilters=
function(k){this.runTags({command:"run"},k)};a.prototype.containerScriptLoadedSynchronously=function(){var k;var l;var q;var d;var b;d=document.getElementsByTagName("script");for(k=0,l=d.length;k<l;k+=1){q=d[k];b=q.getAttribute("src");if(!!b&&b.indexOf(""+this.config.clientId+"-"+this.getContainerId()+".js")>0)return q.getAttribute("async")===null&&(q.getAttribute("defer")===false||q.getAttribute("defer")===""||q.getAttribute("defer")===null)}return true};a.prototype.prepareSessionIfNeeded=function(){var k=
this.config.trackSession;if(k!==true&&k!==false)for(var l=0;l<this.tags.length;l++){var q=this.tags[l];q.resolveAllDynamicData();var d=q.getFilters();for(var b=0;b<d.length;b++){var g=d[b];if(g instanceof e&&g.isSession()){this.trackSession=true;break}}if(this.trackSession)break}else this.trackSession=k;if(a.TRACK_SESSION)this.trackSession=true;if(this.trackSession)this.session=t.setupSession(this);if(this.session);};a.runtimeCounter=a.runtimeCounter||1;a.prototype.runTags=function(k,l){if(this.destroyed)throw"Container has been destroyed.";
if(!l){if(this.config.disabled){this.sendPingsNotTooOften();return}if(a.LOCKED||p.global().QUBIT_CONTAINERS_LOCKED){this.sendPingsNotTooOften();return}}if(this.onBeforeRun)try{this.onBeforeRun()}catch(E){}var q=!this.containerScriptLoadedSynchronously();var d="runIfFiltersPass";if(k&&k.command)d=k.command;this.runningStarted=(new Date).valueOf();if(this.config.scanTags)if(!this._scanned){this.scanForTags();this._scanned=(new Date).valueOf()}this.prepareSessionIfNeeded();var b=this.getTagsInOrder();
var g="___otctnmk"+a.runtimeCounter++;for(var n=0;n<b.length;n++)try{var y=b[n];if(this.includedToRun(y))this._checkAndRun(y,d,q,g)}catch(E){}c.setTimeout(function(){this.sendPingsNotTooOften()}.bind(this),3100);this.waitForAllTagsToFinish();for(var D=0;D<b.length;D++){b[D]._runtimeMarkers[g]=undefined;delete b[D]._runtimeMarkers[g]}};a.prototype.getTagsInOrder=function(){var k=[];for(var l=0;l<this.tags.length;l++){var q=this.tags[l];var d=q.config.priority;if(+d>0){var b=0;for(var g=0;g<k.length;g++){var n=
k[g];if(n){var y=+n.config.priority;if(y>0&&y>d)b++;else break}}k.splice(b,0,q)}else k.push(q)}return k};a.prototype._checkAndRun=function(k,l,q,d){if(!k._runtimeMarkers[d])k._runtimeMarkers[d]=true;else return;var b=k.resolveDependencies();if(b.length>0)for(var g=0;g<b.length;g++)this._checkAndRun(b[g],l,q,d);this._tagRunner(k,l,q)};a.prototype._tagRunner=function(k,l,q){try{if(this.includedToRun(k)){if(q)k.forceAsynchronous=true;if(this.config.delayDocWrite)k.delayDocWrite=true;k.session=k.session||
this.session;k[l]()}}catch(d){}};a.prototype.getContainerId=function(){if(this.config.containerId)return this.config.containerId;else{if(this._pkgName)return this._pkgName;var k=this.PACKAGE_NAME.split(".");k=k[k.length-1];this._pkgName=k;return k}};a.prototype.includedToRun=function(k){if(!k)return false;var l=k.config;if(l.inactive)return false;if(l.disabled)if(!k.cookieSaysToRunEvenIfDisabled())return false;if(k.disabledByCookie())return false;var q=a.consentIsGiven||!l.needsConsent||this.hasConsent();
var d=k.state===m.prototype.STATE.INITIAL;return this.ignoreTagsState||q&&d};a.prototype.scanForTags=function(k,l){if(k)this.tags=[];var q;if(l&&typeof l==="object")q=this.findAllTags(l);else q=this.findAllTagsByClassPath();this.registerTags(q);return q};a.prototype.findAllTags=function(k,l){k=k||this.tagsPackageName||this.PACKAGE_NAME;return r.findAllTags(k,l)};a.prototype.findAllTagsByClassPath=function(k){k=k||this.PACKAGE_NAME;return r.findAllTagsByClassPath(k)};a.prototype.findAllFilters=function(k,
l){k=k||this.tagsPackageName||this.PACKAGE_NAME;return r.findAllFilters(k,l)};a.prototype.waitForAllTagsToFinish=function(){if(this._waitForAllTagsToFinishWaiting)return;if(!this._lastWaited)this._lastWaited=(new Date).valueOf();var k=(new Date).valueOf()-this._lastWaited>15*1E3;var l=this.allTagsFinished()||k;if(!this._showFinishedOnce&&l){this._lastWaited=null;if(k);this._showFinishedOnce=true;this.runningFinished=(new Date).valueOf();this._containerAlreadySentPings=(new Date).valueOf();this.sendPingsNotTooOften();
if(this.onTagsInitiallyRun)this.onTagsInitiallyRun()}else if(!l){this._waitForAllTagsToFinishWaiting=true;this._showFinishedOnce=false;c.setTimeout(function(){this._waitForAllTagsToFinishWaiting=false;this.waitForAllTagsToFinish()}.bind(this),100)}else;};a.prototype.onTagsInitiallyRun=N;a.prototype.resetAllTags=function(k){for(var l=0;l<this.tags.length;l++){this.tags[l].reset();if(!k)this.tags[l].resetFilters()}};a.prototype._prepareTagsToRestart=function(k){for(var l=0;l<this.tags.length;l++)this.tags[l].prepareForRestart(k)};
a.prototype.reset=function(k,l){this.runningFinished=undefined;this._waitForAllTagsToFinishWaiting=undefined;this.runningStarted=undefined;this._showFinishedOnce=undefined;if(!k)this.resetAllTags(l)};a.prototype.onRestart=function(k){this.events.on(v,k)};a.prototype.restart=function(k,l){if(this.config.restartable){this.events.call(v,this);this.reset(true,true);if(!k)this._prepareTagsToRestart(l);this.run()}};a.restartAll=function(k,l){var q=a.getContainers();for(var d=0;d<q.length;d++)try{q[d].restart(k,
l)}catch(b){log.ERROR("Restart failed for container "+q[d].config.name,b)}};a.resetAll=function(k,l){var q=a.getContainers();for(var d=0;d<q.length;d++)try{q[d].reset(k,l)}catch(b){log.ERROR("Reset failed for container "+q[d].config.name,b)}};a.prototype.sendPingsNotTooOften=function(){this._sndLck=this._sndLck||{};c.runIfNotScheduled(this._sendPingsTrigger,2E3,this._sndLck)};a.prototype.sendPings=function(){if(this.config.noPings)return;var k;if(this.isTellingLoadTimes()){var l=this.getAllTagsByState();
var q=[];if(l.run)q=r.getLoadTimes(l.run);this.lastPingsSentTime=(new Date).valueOf();this.ping.send(this,q);q=r.getLoadTimes();var d=[];for(k=0;k<q.length;k++){var b=q[k].tag;if(b.config.dedupe&&b.sendDedupePing)d.push(b)}if(d.length>0){this.lastDedupePingsSentTime=(new Date).valueOf();this.ping.sendDedupe(this,d)}if(l.other){q=r.getLoadTimes(l.other);var g=[];for(k=0;k<q.length;k++)g.push(q[k]);if(g.length>0)this.ping.send(this,g)}if(l.awaiting){q=r.getLoadTimes(l.awaiting);var n=[];for(k=0;k<q.length;k++)n.push(q[k]);
if(n.length>0)this.ping.send(this,n)}}else this.ping.send(this,[])};a.prototype.getAllTagsByState=function(){return a.getAllTagsByState(this.tags)};a.getAllTagsByState=function(k){var l=null;var q=null;var d=null;var b=null;var g=null;var n=null;var y={};var D=m.prototype.STATE.EXECUTED_WITH_ERRORS;for(var E=0;E<k.length;E++){var G=k[E];if(G instanceof m){var H=G.config.name;if(G.scriptExecuted>0){l=l||{};w(l,G,H,y)}else if(G.locked){n=n||{};w(n,G,H,y)}else if(G.scriptExecuted<0||G.state>=D){b=b||
{};w(b,G,H)}else if(G.filtersState()===x.state.SESSION||G.filtersState()>0){d=d||{};w(d,G,H,y)}else if(G.config.needsConsent){g=g||{};w(g,G,H,y)}else{q=q||{};w(q,G,H,y)}}}return{run:l,failed:b,awaiting:d,consent:g,locked:n,other:q}};a.prototype.allTagsFinished=function(){for(var k=0;k<this.tags.length;k++){var l=this.tags[k];if(l instanceof B.opentag.BaseTag){var q=l.filtersState();if(!l.config.disabled){var d=l.filtersState()<0&&!l.locked;var b=!(l.finished()||l.config.runner&&!l.isRunning);if(d&&
b){var g=q!==x.state.SESSION;var n=+l.awaitingDependencies>0;if(g&&!n)return false}}}}return true};a.prototype.getPageVariables=function(){var k=[];for(var l=0;l<this.tags.length;l++){var q=this.tags[l].getPageVariables();for(var d=0;d<q.length;d++)p.addToArrayIfNotExist(k,q[d])}return k};a.getPageVariableByName=function(k){var l=this.getAllPageVariables();var q=[];for(var d=0;d<l.length;d++)if(l[d].config.name===k)q.push(l[d]);return q};var A="qubit.opentag.disableContainerRunning_";var C="qubit.opentag.forceContainerRunning";
a.prototype._getCookieNameForDisabling=function(){return A+this.getContainerId()+this.config.name};a.prototype.disabledByCookie=function(){return!!u.getCached(this._getCookieNameForDisabling())};a.prototype.setCookieToDisable=function(){u.set(this._getCookieNameForDisabling(),"true");u.resetCache()};a.prototype.rmCookieToDisable=function(){u.rm(this._getCookieNameForDisabling());u.resetCache()};a.rmAllDisablingCookies=function(){p.rmCookiesMatching(A);u.resetCache()};a.setCookieForDisabledContainersToRun=
function(){u.set(C,"true");u.resetCache()};a.rmCookieForDisabledContainersToRun=function(){u.rm(C);u.resetCache()}})();(function(){function a(){}function w(){var u=false;if(r.get("opentag_debug")||document.location.href.indexOf("opentag_debug")>=0)u=true;return u}function p(){var u=false;if(r.get("opentag_debug_tool")||document.location.href.indexOf("opentag_debug_tool")>=0)u=true;return u}function x(){try{var u=M.TAGSDK_MAIN_DISABLED_FUNCTION;if(u&&u())return true}catch(z){}if(document.location.href.indexOf("opentag_disabled\x3dtrue")>=
0)return true;return false}function e(u,z,f){if(f&&(u[z]===undefined||u[z]===""||u[z]===null))u[z]=f}function m(u){var z=u.PACKAGE_NAME.split(".");z=z[z.length-1];var f=t.getParentObject(u.PACKAGE_NAME);f[z]=null;delete f[z]}function c(u){var z=t.getParentObject(u.PACKAGE_NAME);var f=z.ClientConfig;if(f&&f.clientId)return f.clientId;else{var v=u.PACKAGE_NAME.split(".");return v[v.length-2].substring(1)}}var r=B.Cookie;var t=B.opentag.Utils;B.opentag.Log.setLevelFromCookie();a.run=function(){var u=
false;if(x())return;var z=false;var f=p();var v=f||w();if(!z&&v){if(!B.DEBUG_MODE)M.TAGSDK_NS_OVERRIDE=true;else M.TAGSDK_NS_OVERRIDE=false;u=true}if(B.DEBUG_MODE)M.TAGSDK_NS_OVERRIDE=false;try{I.html.UVListener.init()}catch(A){}a.runAllContainers(u)};a.runAllContainers=function(u){try{var z=B.opentag.Container.getContainers();for(var f=0;f<z.length;f++){var v=z[f];var A=v.config;if(!v.runningStarted&&!v.configuredInMain){A.scanTags=true;var C=t.getParentObject(v.PACKAGE_NAME).ClientConfig;if(C)e(v.config,
"clientId",C.id);var k=t.getParentObject(v.PACKAGE_NAME).SystemDefaults;if(k){e(A,"pingServerUrl",k.pingServerUrl);e(A,"tellLoadTimesProbability",k.tellLoadTimesProbability)}v.configuredInMain=true;if(u){v.destroy(true);m(v);a.loadDebugVersion(v)}else if(!M.QUBIT_OPENTAG_STOP_MAIN_EXECUTION)v.run();else(function(){var l=B.opentag.RUN_STOPPED_EXECUTON;B.opentag.RUN_STOPPED_EXECUTON=function(){try{if(l)l()}finally{v.run()}}})(v)}}}catch(l){}};a.loadDebugVersion=function(u){var z=document.createElement("script");
var f;var v=u.config.scriptURL;var A=c(u);var C=u.getContainerId();if(v){f=v;var k="-debug.js".length;if(f.lastIndexOf("-debug.js")!==f.length-k){f=f.substring(0,f.length-".js".length);f+="-debug.js"}}var l="//d3c3cq33003psk.cloudfront.net/opentag-"+A+"-"+C+"-debug.js";if(f&&l!==f)z.src=f;else z.src="//s3-eu-west-1.amazonaws.com/opentag/opentag-"+A+"-"+C+"-debug.js";document.getElementsByTagName("head")[0].appendChild(z)};B.Define.namespace("qubit.opentag.Main",a)})()})()})();(function(){})();
(function(){var L=qubit.opentag.Container;var F=new L({"maxCookieLength":3E3,"cookieDomain":"","pingServerUrl":"","delayDocWrite":false,"name":"Best of the Best","gzip":true,"disabled":false,"tellLoadTimesProbability":1,"containerId":867681});var K="bestofthebest.Container";qubit.Define.clientNamespace(K,F)})();
(function(){var L=qubit.opentag.filter.Filter;var F=new L({"include":true,"name":"Is jQuery and ATB Elements","priority":1});var K="bestofthebest.filters.IsJQueryAndElements";qubit.Define.clientNamespace(K,F);F.customStarter=function(M,Z){var B=function(W){W=W||50;var N=window.__qubit;if(N&&window.jQuery){var X=window.jQuery;if(X('input[type\x3d"submit"].btn.orange').length||X(".ticket-slider td a").length)Z()}else setTimeout(function(){B(W*2)},W)};B()};F.customScript=function(M){return true};F.lexicalPattern=
""})();(function(){var L=qubit.opentag.filter.Filter;var F=new L({"include":true,"name":"www.botb.com/Receipt.aspx","pattern":"www.botb.com/Receipt.aspx","patternType":"CONTAINS","priority":2});var K="bestofthebest.filters.WwwBotbComReceiptAspx";qubit.Define.clientNamespace(K,F);F.customStarter=null;F.customScript=null;F.lexicalPattern=""})();
(function(){var L=qubit.opentag.filter.Filter;var F=new L({"include":true,"name":"Default filter: Match all","pattern":"","patternType":"ALL_URLS","priority":1});var K="bestofthebest.filters.DefaultFilterMatchAll";qubit.Define.clientNamespace(K,F);F.customStarter=null;F.customScript=null;F.lexicalPattern=""})();
(function(){var L=qubit.opentag.filter.Filter;var F=new L({"include":true,"name":"www.botb.com/receipt.aspx(1)","pattern":"www.botb.com/receipt.aspx","patternType":"CONTAINS","priority":1});var K="bestofthebest.filters.WwwBotbComReceiptAspx1";qubit.Define.clientNamespace(K,F);F.customStarter=null;F.customScript=null;F.lexicalPattern=""})();
(function(){var L=qubit.opentag.CustomTag;var F=new L({"dedupe":false,"locationPlaceHolder":"NOT_END","needsConsent":false,"active":true,"url":"dtxtngytz5im1.cloudfront.net/qtracker-5.0.0.min.js","timeout":-1,"async":true,"usesDocumentWrite":false,"prePostWindowScope":true,"name":"QuBit QTracker","disabled":false,"id":13625184,"locked":false,"locationObject":"HEAD"});var K="bestofthebest.tags.qubitqtracker.Tag";qubit.Define.clientNamespace(K,F);F.htmlContent="";F.addClientFiltersList([]);F.addClientVariablesMap({});
F.addParameters([]);F.genericDependencies=[];F.addClientDependenciesList([]);F.pre=function(){window._qtd=window._qtd||[];window._qtd.push({options:{domain:".botb.com",serverUrl:"pong.qubitproducts.com/t2",clientId:"botb"}})};F.script=function(){};F.post=function(){}})();
(function(){var L=qubit.opentag.CustomTag;var F=new L({"dedupe":false,"locationPlaceHolder":"NOT_END","needsConsent":false,"active":true,"url":"dd6zx4ibq538k.cloudfront.net/smartserve-2799.js","timeout":-1,"async":true,"usesDocumentWrite":false,"name":"Qubit Deliver","disabled":false,"id":14031532,"locked":false,"locationObject":"HEAD"});var K="bestofthebest.tags.qubitdeliver.Tag";qubit.Define.clientNamespace(K,F);F.htmlContent="";F.addClientFiltersList(["bestofthebest.filters.DefaultFilterMatchAll"]);
F.addClientVariablesMap({});F.addParameters([]);F.genericDependencies=[];F.addClientDependenciesList([]);F.pre=function(){};F.script=function(){};F.post=function(){}})();
(function(){var L=qubit.opentag.CustomTag;var F=new L({"dedupe":false,"locationPlaceHolder":"NOT_END","needsConsent":false,"active":true,"url":"","timeout":5E3,"async":true,"usesDocumentWrite":false,"name":"UV Event: Add to Basket","disabled":false,"id":27283030,"locked":false,"locationObject":"HEAD"});var K="bestofthebest.tags.uveventaddtobasket.Tag";qubit.Define.clientNamespace(K,F);F.htmlContent='\x3cscript\x3e\n  var sendUVEvent \x3d function(action) {\n    window.universal_variable \x3d window.universal_variable || {}\n    universal_variable.events \x3d universal_variable.events || []\n    universal_variable.events.push({\n      "category": "qubit-opentag",\n      "action": action\n    })\n  }\n  window.__qubit.amd.require(\'jquery\')(\'input[type\x3d"submit"].btn.orange, .ticket-slider td a\').click(function () {\n    sendUVEvent("add-to-basket:clicked")\n  })\n\x3c/script\x3e';
F.addClientFiltersList(["bestofthebest.filters.IsJQueryAndElements"]);F.addClientVariablesMap({});F.addParameters([]);F.genericDependencies=[];F.addClientDependenciesList([]);F.pre=function(){};F.script=function(){};F.post=function(){}})();(function(){try{qubit.opentag.Main.run()}catch(L){try{console.error("Errors during opentag main runtime.",L)}catch(F){}}})();